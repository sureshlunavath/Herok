(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{XcXv:function(t,e,i){"use strict";i.d(e,"a",function(){return h});var a=i("4R65"),s=(i("ESut"),i("P2Dx"),i("h2AD"),i("BRqF"),i("73zf"),i("1KZf"),i("6LCt"),i("T9kQ"),i("iNfD"),i("dbVV"),i("MCLT")),r=i("WVt+"),o=(i("JvN/"),i("LUGh"),i("XQuM")),n=(i("6QN/"),i("7Amg")),l=(i("QDzO"),i("Ex5H")),h=(i("q4vc"),function(){function t(t,e,i,s,r,o,l,h,u,c){var m=this;this.utils=t,this.sharedUtilsService=e,this.mapService=i,this.route=s,this.cd=r,this.chartConstant=o,this.router=l,this.injector=h,this.datepipe=u,this.dataService=c,this.playbarflag=!0,this.dataTabToggleVal=!0,this.activeLayers=[],this.style={stroke:!1,color:"#FF0000",fill:!0,fillColor:"#FF0000",fillOpacity:.4,opacity:.4},this.hourCounter="",this.blockNumber=0,this.dateBlockNumMap={},this.playPosition=0,this.polygons=[],this.isDisabled=!1,this.sidebarOpenCloseFlag=!0,this.sidebarHoverFlag=!1,this.componentToIconMapping={RAINFALL:"bi bi-cloud-rain-fill",DROUGHT:"tnw-drought"},this.flag=!0,this.playButtonDisable=!0,this.chartData=[],this.tsArrayForPlay=[],this.tsLabelsArrayForPlay=[],this.state="stop",this.popUpData={},this.bottomBarColumns=[],this.allLayerList=[],this.overlayLayerList=[],this.geojsonLayerList=[],this.wmsLayerList=[],this.value=3,this.imageBounds=[],this.startIndex=1,this.styleObjforBottomBar={},this.vectorTileLayer={},this.labelStrings=[],this.marker=null,this.noData=!1,this.millisInSixHours=n.c.MILLIS_IN_6HOURS,this.particleMultiplier=6e-4,this.showThrobberbottomBar=!1,this.abbrvMapping=n.c.COMPONENT_ABBREVIATION_MAPPING,this.heatMapoptions={opacity:.8,pane:"heatMap",minZoom:6,maxZoom:15},this.borderBottomBarStyle={},this.bottomBarTableStyles={},this.gradientColors=[],this.gradientStyles={},this.heightHundred={},this.customMarker=new a.icon({iconUrl:"https://upload.wikimedia.org/wikipedia/commons/9/93/Map_marker_font_awesome.svg",iconSize:[35,41],iconAnchor:[14,41],popupAnchor:[15,-40]}),this.bottomTableKeys=[],this.playWidth=3,this.toggleSidebarFilterStatus=!1,this.day=String((new Date).getDate()).padStart(2,"0"),this.newsBulletinData={RAINFALL:"Tamil Nadu District wise Cumulative Rainfall Status from 01-06-2022 to "+this.day+"-11-2022  : Ariyalur-268.7mm(99.3%) ; Chengalpattu -267.9mm(80.9%) ;Chennai - 250.7mm (53.9%); Coimbatore-131.6mm(85%); Cuddalore-413.4mm(165.4%); Dharmapuri-71.3mm(43.5%); Dindigul-147.1mm(106%); Erode-84mm(52.6%); Kallakurichi-152.1mm(70.7%); Kancheepuram-236.8mm(59.6%); Kanniyakumari-111.3mm(19.1%); Karur-100.1mm(62.6%); Krishnagiri-88.8mm(124.8%); Madurai-114.8mm(67%); Mayiladuthurai-481.4mm(167.6%); Nagapattinam-229mm(13.3%); Namakkal-98.1mm(86.6%); Perambalur-100.2mm(19.5%); Pudukkottai-87.5mm(3.8%); Ramanathapuram-100.3mm(10.3%); Ranipet-150.2mm(56.3%); Salem-82.4mm(46.9%); Sivagangai-88.7mm(27.6%); Tenkasi-94.8mm(8.7%); Thanjavur-197.7mm(58.1%); Theni-142.9mm(93.9%); TheNilgiris-114.2mm(22.9%); Thiruvannamalai-152.1mm(76.4%); Thoothukudi-65.1mm(-20.8%); Tiruchirapalli-84.7mm(27.1%); Tirunelveli-86.5mm(-7.7%); Tirupattur-94.5mm(83.7%); Tiruppur-147.6mm(116.9%); Tiruvallur-206.2mm(40.1%); Tiruvarur-221.6mm(30.3%); Vellore-78.4mm(22%); Villupuram-225.1mm(92.1%) Virudhunagar-102.9mm(37.1%);",RIVERGAUGE:"Tamil Nadu River gauges Status as of "+this.day+"-11-2022    :    AMBARAMPALAYAM-219.9(Rising); Avarankuppam-365.9(Rising); Balasamudram-244.5(Rising); Chembarampakkam-25(Rising);GUMMANUR-491.6(Rising);HOGENAKKAL-253.2(Rising);KALLIDAIKURICHHI-70.6(Rising);LAKSHMANANPATTI-213.5(Rising);Melkalpoondi-99.5(Rising); MONNAVEDU-98.4(Rising);NALLAMARANPATTY-130.8(Rising);NELLITHURAI-305.1(Rising);Panneswaram Madam-446.3(Rising); PATTUKOTTAI-44.9(Rising); Puduvayal-95.6(Rising); UPPER ANICUT-74.4(Rising);URACHIKOTTAI-160.6(Rising); Vazhavachanur-135.1(Rising); Venganur-77.1(Rising)",GROUNDWATER:"Tamil Nadu Ground Water Status Report as of 1st Nov 2022 : Ariyalur-3(m); Chengalpattu-3.4(m); Chennai-8(m); Coimbatore-10.6(m); Cuddalore-4.4(m); Dharmapuri-5.1(m); Dindigul-5.9(m); Erode-4.3(m); Kallakurichi-4.5(m); Kancheepuram-2.2(m); Kanniyakumari-5.9(m); Karur-4.3(m); Krishnagiri-2.4(m); Madurai-5.2(m); Mayiladuthurai-4(m); Nagapattinam-2.4(m); Namakkal-6(m); Perambalur-4.9(m); Pudukkottai-4.5(m); Ramanathapuram-7.9(m); Ranipet-2.8(m); Salem-3.5(m); Sivagangai-3.4(m); Tenkasi-6.1(m); Thanjavur-1.9(m); Theni-6.3(m); TheNilgiris-2(m);Thiruvannamalai-3.2(m); Thoothukudi-4.9(m); Tiruchirapalli-4(m); Tirunelveli-5.8(m); Tirupattur-3(m); Tiruppur-7.3(m); Tiruvallur-3.2(m); Tiruvarur-2.2(m); Vellore-4.1(m); Villupuram-5(m); Virudhunagar-6.2(m)"};var p=this.route.snapshot.paramMap.get("id");this.STATENAME=n.c.IDTOSTATENAMEMAPPING[p],this.utils.setPopUpData({location:n.c.IDTOLOCATIONMAPPING[p]}),this.setLocationData(),this.selectedLocation="",this.showThrobber=!0,this.showBottomBar=!1,this.bottomBarMenuSelectedIndex=0,this.styleObjforBottomBar={width:0},this.postData={},this.bottomBarColumns.push("Component"),this.geoJsonData={},this.dateList=[],this.utils.getAdminBasinToggle().subscribe(function(t){m.adminSelected=t,m.view=1==m.adminSelected?"Admin":"Basin"}).unsubscribe(),this.utils.minMax.subscribe(function(t){m.minMax=t}).unsubscribe(),this.forecastLength=this.route.snapshot.paramMap.get("time"),this.utils.thresholdMap.subscribe(function(t){m.thresholdMap=t}),this.selectedComponent=l.url.split("/")[2]}return t.prototype.ngAfterViewInit=function(){this.initMap(),this.addBaseLayers(this.layerList),this.serviceMap.addTimeBasedLayers(this,this.layerList),this.addSubscriptions(),this.direction={}},t.prototype.toggleNewSidebarFilterStatus=function(){this.toggleSidebarFilterStatus=!this.toggleSidebarFilterStatus,this.sharedUtilsService.setVisibilityNewSidebarFilterStatus(this.toggleSidebarFilterStatus)},t.prototype.ngOnInit=function(){var t=this;if("NOWCAST"===this.sourceSelected)this.blockNumber=0,this.playPosition=0,this.utils.setPlayButton(this.playPosition),this.utils.setBlockNumber(this.blockNumber);else if("heatwatches"===this.router.url.split("/")[2])for(var e=new Date,i=0;i<4;++i)this.dateBlockNumMap[this.datepipe.transform(e,"yyyy-MM-dd").split("-").join("")]=i,e.setDate(e.getDate()+1);else"extremeweather"===this.router.url.split("/")[2]&&"rainfall"===this.router.url.split("/")[3]&&"24"===this.router.url.split("/")[4]?(this.blockNumber=4,this.utils.setBlockNumber(this.blockNumber),this.playPosition=4,this.utils.setPlayButton(this.playPosition)):"extremeweather"===this.router.url.split("/")[2]&&"rainfall"===this.router.url.split("/")[3]&&"10"===this.router.url.split("/")[4]?(this.blockNumber=0,this.playPosition=0,this.utils.setPlayButton(this.playPosition),this.utils.setBlockNumber(this.blockNumber)):"extremeweather"===this.router.url.split("/")[2]&&"rainfall"===this.router.url.split("/")[3]&&"weekly"===this.router.url.split("/")[4]&&(this.blockNumber=0,this.playPosition=0,this.utils.setPlayButton(this.playPosition),this.utils.setBlockNumber(this.blockNumber));this.utils.setVisibilitySidebarMenuStatus(!0),this.visibiliSidebarSubscription=this.utils.getVisibilitySidebarMenuStatus().subscribe(function(e){null!=e&&null!=e&&(t.sidebarOpenCloseFlag=e)}),this.utils.setSidebarHoveringStatus(!1),this.visibiliSidebarSubscription=this.utils.getSidebarHoveringStatus().subscribe(function(e){null!=e&&null!=e&&(t.sidebarHoverFlag=e)})},t.prototype.getSidebarClassName=function(){return this.sidebarOpenCloseFlag&&this.sidebarHoverFlag?"side-hover-play play-time-shrink ":this.sidebarOpenCloseFlag&&!this.sidebarHoverFlag?"play-time-shrink":!this.sidebarOpenCloseFlag&&this.sidebarHoverFlag?"side-hover-play":this.sidebarOpenCloseFlag||this.sidebarHoverFlag?void 0:""},t.prototype.ngOnDestroy=function(){null!=this.forecastLengthSubscription&&this.forecastLengthSubscription.unsubscribe(),null!=this.adminBasinSubscription&&this.adminBasinSubscription.unsubscribe(),null!=this.districtClickedSubscription&&this.districtClickedSubscription.unsubscribe(),null!=this.leftSideBarSubscription&&this.leftSideBarSubscription.unsubscribe(),null!=this.basinClickedSubscription&&this.basinClickedSubscription.unsubscribe(),null!=this.miniMapSubscription&&this.miniMapSubscription.unsubscribe(),null!=this.initialMapSubscription&&this.initialMapSubscription.unsubscribe()},t.prototype.ngOnChanges=function(t){this.map&&this.changeStateBasedonUrlParams(),this.basinGeoJSONData&&this.createMultiPolygon(this.basinGeoJSONData),t.sourceSelected&&t.sourceSelected.currentValue&&this.changeAttribution(),t.giscolorsdata&&t.giscolorsdata.currentValue&&this.addBaseLayers(this.layerList),t.legenddata&&t.legenddata.currentValue&&this.addLegend()},t.prototype.createPanes=function(){var t=this;o.a.PANE_LIST.forEach(function(e){"NOWCAST"===t.sourceSelected?"heatMap"==e.name&&(e.zindex="407"):"heatMap"==e.name&&(e.zindex="395"),t.map.createPane(e.name),t.map.getPane(e.name).style.zIndex=e.zindex})},t.prototype.initMap=function(){this.map=a.map("map",this.mapService.getMapOptions(this.STATENAME,n.c)),this.utils.setMainMap(this.map),this.dataService.addMaps("map",this.map),this.injectService(),this.addZoomBar(),this.createPanes(),this.addLegend(),this.addMapEvents(),this.setUrlParams(),this.createLabels()},t.prototype.setUrlParams=function(){this.otherOptions.urlParams&&(this.urlParams=this.otherOptions.urlParams)},t.prototype.injectService=function(){this.serviceMap=this.injector.get(this.otherOptions.service)},t.prototype.addMapEvents=function(){var t=this;this.map.on({zoomstart:function(e){null!=t.clickedLocationMarker&&null!=t.clickedLocationMarker&&(t.clickedLocationMarker.unbindTooltip(),t.clickedLocationMarker.bindTooltip(t.clickedLocationTooltip),t.clickedLocationMarker=null)},click:function(e){if(t.polygons.length>0){var i=r.point([e.latlng.lng,e.latlng.lat]),a=0;t.polygons.forEach(function(t){r.inside(i,t)&&(a=1)}),1!==a&&(t.bottombarClick=!1,t.closeBottomBar(0),alert("No data present for the point"))}}})},t.prototype.addSubscriptions=function(){var t=this;this.forecastLengthSubscription=this.route.params.subscribe(function(e){t.utils.setCurrentPlayPosition(null),t.utils.thresholdMap.next({}),t.changeLayerStyleforThreshold(""),e.time!=t.forecastLength&&(t.forecastLength=e.time,t.playButtonDisable=!0,t.labelStrings=[],t.removeAllTimeLayers(),t.serviceMap.addTimeBasedLayers(t,t.layerList),t.addLegend())}),this.utils.minMax.subscribe(function(e){e!=t.minMax&&(t.minMax=e,t.playButtonDisable=!0,t.labelStrings=[],t.removeAllTimeLayers(),t.serviceMap.addTimeBasedLayers(t,t.layerList))}),this.adminBasinSubscription=this.utils.getAdminBasinToggle().subscribe(function(e){t.adminSelected!=e&&(t.adminSelected=e,t.view=1==t.adminSelected?"Admin":"Basin",t.removeAllLayers(),t.addBaseLayers(t.layerList),t.serviceMap.addTimeBasedLayers(t,t.layerList),"Basin"==t.view?t.map.setView(l.e.TAMILNADU,l.f.TAMILNADU):"Admin"==t.view&&t.map.setView(l.e.TAMILNADU,l.f.TAMILNADU))}),this.utils.districtClicked.subscribe(function(e){t.removeAllLayers(),t.addBaseLayers(t.layerList),t.serviceMap.addTimeBasedLayers(t,t.layerList)}),this.leftSideBarSubscription=this.utils.index.subscribe(function(e){null!=e&&null!=e&&e!=t.activeGroup&&t.serviceMap.changeTimeLayers(t,e)}),this.districtClickedSubscription=this.utils.districtClicked.subscribe(function(e){t.districtClicked=e;var i,a,s=null;for(var r in t.activeLayers){var o=t.activeLayers[r];null!=o.name&&null!=o.name&&"blockLayer"==o.name&&(s=o.layer)}null!=t.districtClicked?null!=t.districtClicked.loc&&("State"==t.districtClicked.locType?(i=t.districtClicked.centroid,a=t.districtClicked.zoomLevel,t.map.getZoom()<9&&(t.map.removeLayer(s),s.options.minZoom=9,s.addTo(t.map))):t.adminSelected?(i=[t.districtClicked.centroid.lat,t.districtClicked.centroid.lon],a=10,null!=n.c.LOC_ZOOM_LEVEL[t.districtClicked.locType]&&(a=n.c.LOC_ZOOM_LEVEL[t.districtClicked.locType])):(i=[t.districtClicked.centroid.lat,t.districtClicked.centroid.lon],a=9,null!=n.c.LOC_ZOOM_LEVEL[t.districtClicked.locType]&&(a=n.c.LOC_ZOOM_LEVEL[t.districtClicked.locType]),s.options.minZoom=a,t.map.removeLayer(s),s.addTo(t.map)),t.map.setView(i,a)):t.map.getZoom()<9&&(t.map.removeLayer(s),s.options.minZoom=9,s.addTo(t.map))}),this.basinClickedSubscription=this.utils.basinClicked.subscribe(function(e){t.basinClicked=e;var i=[t.basinClicked.centroid.lat,t.basinClicked.centroid.lon];console.log(i),t.map.setView(i,7)}),this.miniMapSubscription=this.utils.getMinimapSelected().subscribe(function(e){if(e){var i;t.showBottomBar=!0,t.removeAllTimeLayers(),"ensmblMap2.5"==e?i=t.otherOptions.lightRainfall:"ensmblMap15.6"==e?i=t.otherOptions.moderateRainfall:"ensmblMap64.5"==e?i=t.otherOptions.heavyRainfall:"ensmblMap115.6"==e&&(i=t.otherOptions.vheavyRainfall),t.legend&&t.legend.remove();var s=a.control({position:"bottomright"});s.onAdd=function(){var t=a.DomUtil.create("div","info");if(null!=i&&null!=i){null!=i.Units&&null!=i.Units&&(t.innerHTML+='<p class="bg-white font-weight-bold text-dark text-center my-0">'+i.Units+"</p");for(var e=i.colorValues,s=e.length-1;s>=0;s--)t.innerHTML+='<p class="my-0 font-weight-bold text-center" style="background-color:'+e[s].backgroundColor+" ; color:"+e[s].color+'">'+e[s].text+"</p>"}return t},t.legend=s,s.addTo(t.map)}}),this.initialMapSubscription=this.utils.getInitialMap().subscribe(function(e){1==e&&(t.showBottomBar=!1,t.removeAllLayers(),t.addBaseLayers(t.layerList),t.serviceMap.addTimeBasedLayers(t,t.layerList),t.addLegend())})},t.prototype.addLegend=function(){var t=this.legenddata?this.legenddata:this.otherOptions.legend;"weekly"===this.forecastLength&&(t=this.otherOptions.weeklyLegend),this.legend&&this.legend.remove();var e=a.control({position:"bottomright"});e.onAdd=function(){var e=a.DomUtil.create("div","info");if(null!=t&&null!=t){null!=t.Units&&null!=t.Units&&(e.innerHTML+='<p class="bg-white text-center my-0 heading">'+t.Units+"</p");for(var i=t.colorValues,s=i.length-1;s>=0;s--)e.innerHTML+="<div><span style='background-color: "+i[s].backgroundColor+"'></span><p>"+i[s].text+"</p></div>"}return e},this.legend=e,e.addTo(this.map)},t.prototype.addBaseLayers=function(t){for(var e in t){var i=t[e];if("Base"==i.type&&(i.view==this.view||"Both"==i.view)){var a=this.serviceMap.createLayer(i,this);null!=a.layer&&null!=a.layer&&(1==i.hidelayer||a.layer.addTo(this.map),this.activeLayers=this.activeLayers.concat(a)),t[e]=a,!this.giscolorsdata||"tamilnadu_mandal"!=a.layerName&&"kaleshwaram:tamilnadu_mandal"!=a.layerName||this.serviceMap.fillMapWithColors(this.giscolorsdata,a)}}this.layerList=t},t.prototype.addZoomBar=function(){(new a.control.zoomBar).addTo(this.map)},t.prototype.createLabels=function(){if("24"==this.forecastLength)for(var t in this.timeStampList=this.utils.get24HrsTimeStamps(),this.timeStampList)this.labelStrings[t]="4"==t?{label:"24hr",groupName:"24hr"}:{label:this.convertTimestampToBlockValue(this.timeStampList[t]),groupName:this.timeStampList[t].toString()};else if("10"==this.forecastLength)for(var t in this.timeStampList=this.utils.get10DaysTimeStamps(),this.timeStampList)this.labelStrings[t]={label:this.convertTimestampToBlockValue(this.timeStampList[t]),groupName:this.timeStampList[t].toString()}},t.prototype.convertTimestampToBlockValue=function(t){if(t=Number(t),"24"==this.forecastLength){var e=new Date(t).getHours(),i=new Date(t).getMinutes(),a="A.M";return e>12&&(e-=12,a="P.M"),e.toString()+":"+i.toString()+" "+a}return"10"==this.forecastLength?new Date(t).toLocaleDateString():t},t.prototype.show=function(){},t.prototype.revalidateMap=function(){var t=this;window.dispatchEvent(new Event("resize")),this.map&&setTimeout(function(){t.map.invalidateSize()},200)},t.prototype.dataTabToggle=function(t){this.revalidateMap(),this.dataTabToggleVal=t?t.value:!this.dataTabToggleVal,this.isDisabled=!(!t||0!=t.value),this.utils.setCurrentComponent(this.router.url.split("/")[3]),this.dataTabToggleVal?document.getElementById("MapContainer").offsetWidth<1600&&(document.documentElement.style.setProperty("--opacite","none"),document.documentElement.style.setProperty("--lPercent","70%")):(document.documentElement.style.setProperty("--opacite","display"),document.documentElement.style.setProperty("--lPercent","50%"))},t.prototype.openBottomBar=function(t,e){this.bottomBarComponent=e,this.showBottomBar=!0,this.apiParams=t},t.prototype.changeTimeLayers=function(t){this.labelStrings[0]&&(this.initialCounter=parseInt(this.labelStrings[0].groupName,10)),"NOWCAST"===this.sourceSelected?"extremeweather"===this.router.url.split("/")[2]&&(this.counter=parseInt(t,10),this.hourCounter="",this.blockNumber=Math.floor((this.counter-this.initialCounter)/36e5),this.utils.setBlockNumber(this.blockNumber),this.utils.setPlayButton(this.blockNumber),this.serviceMap.changeTimeLayers(this,t)):("extremeweather"===this.router.url.split("/")[2]?"24hr"!==t?(this.counter=parseInt(t,10),this.hourCounter="","weekly"===this.router.url.split("/")[4]?(this.blockNumber=Math.floor((this.counter-this.initialCounter)/6048e5),this.utils.setBlockNumber(this.blockNumber),this.utils.setPlayButton(this.blockNumber)):"rainfall"!==this.router.url.split("/")[3]&&"temperature"!==this.router.url.split("/")[3]&&"humidity"!==this.router.url.split("/")[3]||"10"!==this.router.url.split("/")[4]?(this.blockNumber=Math.floor((this.counter-this.initialCounter)/216e5),this.utils.setBlockNumber(this.blockNumber),this.utils.setPlayButton(this.blockNumber)):(this.blockNumber=Math.floor((this.counter-this.initialCounter)/864e5),this.utils.setBlockNumber(this.blockNumber),this.utils.setPlayButton(this.blockNumber))):(this.hourCounter=t,this.blockNumber=4,this.utils.setBlockNumber(this.blockNumber),this.utils.setPlayButton(this.blockNumber)):"heatwatches"===this.router.url.split("/")[2]&&(this.blockNumber=this.dateBlockNumMap[parseInt(t,10)]),"10"!==this.route.snapshot.paramMap.get("time")&&"weekly"!==this.route.snapshot.paramMap.get("time")||"rainfall"!==this.router.url.split("/")[3]||"ECMWF"!==this.sourceSelected||this.utils.setCurrentPlayPosition(t),this.serviceMap.changeTimeLayers(this,t),!Object(s.isNullOrUndefined)(this.thresholdMap)&&Object.keys(this.thresholdMap).length>0&&this.changeLayerStyleforThreshold())},t.prototype.removeGroupTimeLayers=function(t){this.serviceMap.removeGroupTimeLayers(this,t)},t.prototype.removeAllTimeLayers=function(){this.serviceMap.removeAllTimeLayers(this)},t.prototype.removeAllLayers=function(){var t=this;for(var e in this.activeLayers){var i=this.activeLayers[e];null!=i&&null!=i.layer&&null!=i.layer&&this.map.removeLayer(i.layer),this.activeLayers[e]="deleted"}this.activeLayers=this.activeLayers.filter(function(t){return"deleted"!=t}),this.map.eachLayer(function(e){return t.map.removeLayer(e)})},t.prototype.closeBottomBar=function(t){this.map.hasLayer(this.clickedLocationMarker)&&(this.clickedLocationMarker.unbindTooltip(),this.clickedLocationMarker.bindTooltip(this.clickedLocationTooltip)),this.map.hasLayer(this.marker)&&(this.map.removeLayer(this.marker),this.marker=null),this.showBottomBar=!1},t.prototype.setLocationData=function(){var t=this;this.utils.getLocationLayerData(function(e){t.selectedLocation=e.features&&1==e.features.length&&e.features[0].properties&&e.features[0].properties.block&&e.features[0].properties.state_name==t.STATENAME?e.features[0].properties.block:n.c.IDTOLOCATIONMAPPING[t.route.snapshot.paramMap.get("id")]},function(e){console.log(e),t.selectedLocation=n.c.IDTOLOCATIONMAPPING[t.route.snapshot.paramMap.get("id")]},"INDIA_BLOCK")},t.prototype.changeLayerStyleforThreshold=function(t){var e,i=this,a=[],r={};if("humidity"===t&&(this.componentType=t),"humidity"===this.componentType&&(r={stroke:!1,color:"#0000FF",fill:!0,fillColor:"#0000FF",fillOpacity:.4,opacity:.4}),Object.keys(this.thresholdMap).forEach(function(t){if("24hr"===i.hourCounter)"type"!==t&&1===i.thresholdMap[t][4]&&a.push(t.toLowerCase());else if(!Object(s.isNullOrUndefined)(i.counter)&&i.counter>0)if("type"!==t&&4===i.thresholdMap[t].length||5===i.thresholdMap[t].length)1===i.thresholdMap[t][Math.floor((i.counter-i.initialCounter)/216e5)]&&a.push(t.toLowerCase());else{var e=i.initialCounter,r=new Date,o=new Date;o.setHours(5,30,0);var n=new Date;n.setHours(11,30,0);var l=new Date;l.setHours(17,30,0);var h=new Date;h.setHours(23,30,0),"type"!==t&&1===i.thresholdMap[t][Math.floor((i.counter-(e-=r>=o&&r<n?0:r>=n&&r<l?216e5:r>=l&&r<h?432e5:648e5))/864e5)]&&a.push(t.toLowerCase())}else"type"!==t&&1===i.thresholdMap[t][0]&&a.push(t.toLowerCase())}),"District View"===this.thresholdMap.type)for(var o=0,l=Object.keys(this.activeLayers);o<l.length;o++){var h=n.c.STATE_TO_LAYERTYPE_NAME[this.STATENAME+"_DISTRICT"];"VectorLayer"===this.activeLayers[b=l[o]].serviceType&&this.activeLayers[b].layerName===h&&(this.map.removeLayer(e=this.activeLayers[b].layer),e.options.vectorTileLayerStyles[h]=function(t,e){return a.includes(t.uuid)?"humidity"===i.componentType?r:i.style:{opacity:0}},this.map.addLayer(e))}else if("Basin View"===this.thresholdMap.type)for(var u=0,c=Object.keys(this.activeLayers);u<c.length;u++)h=n.c.STATE_TO_LAYERTYPE_NAME[this.STATENAME+"_BASIN"],"VectorLayer"===this.activeLayers[b=c[u]].serviceType&&this.activeLayers[b].layerName===h&&(this.map.removeLayer(e=this.activeLayers[b].layer),e.options.vectorTileLayerStyles[h]=function(t,e){return a.includes(t.uuid)?"humidity"===i.componentType?r:i.style:{opacity:0}},this.map.addLayer(e));else if("Mandal View"===this.thresholdMap.type)for(var m=0,p=Object.keys(this.activeLayers);m<p.length;m++)h=n.c.STATE_TO_LAYERTYPE_NAME[this.STATENAME+"_BLOCK"],"VectorLayer"===this.activeLayers[b=p[m]].serviceType&&this.activeLayers[b].layerName===h&&(this.map.removeLayer(e=this.activeLayers[b].layer),e.options.vectorTileLayerStyles[h]=function(t,e){return a.includes(t.uuid)?"humidity"===i.componentType?r:i.style:{opacity:0}},this.map.addLayer(e));else if("Sub-basin View"===this.thresholdMap.type)for(var d=0,y=Object.keys(this.activeLayers);d<y.length;d++){var b;h=n.c.STATE_TO_LAYERTYPE_NAME[this.STATENAME+"_SUBBASIN"],"VectorLayer"===this.activeLayers[b=y[d]].serviceType&&this.activeLayers[b].layerName===h&&(this.map.removeLayer(e=this.activeLayers[b].layer),e.options.vectorTileLayerStyles[h]=function(t,e){return a.includes(t.uuid)?"humidity"===i.componentType?r:i.style:{opacity:0}},this.map.addLayer(e))}else 0===Object.keys(this.thresholdMap).length&&this.resetLayerStyle()},t.prototype.resetLayerStyle=function(){for(var t=0,e=Object.keys(this.activeLayers);t<e.length;t++){var i=e[t];"VectorLayer"===this.activeLayers[i].serviceType&&(this.map.removeLayer(this.activeLayers[i].layer),this.activeLayers[i].layer.options.vectorTileLayerStyles[this.activeLayers[i].layerName]=function(t,e){return{opacity:0}},this.map.addLayer(this.activeLayers[i].layer))}},t.prototype.handleEventFromSearch=function(t){"DISTRICT"==t.et&&this.utils.setSearchBox(t),this.map.flyTo([t.location.lat,t.location.long],n.c.LOCATION_ZOOM_MAPPING[t.et.toUpperCase()])},t.prototype.changeStateBasedonUrlParams=function(){this.otherOptions.urlParams?(this.urlParams=this.otherOptions.urlParams,1==this.urlParams.mapOnClickParams||1==this.urlParams.handleEventFromBreadcrumb||(this.showThrobber=!0,this.removeAllTimeLayers(),this.serviceMap.addTimeBasedLayers(this,this.layerList),this.addLegend())):(this.showThrobber=!0,this.removeAllTimeLayers(),this.serviceMap.addTimeBasedLayers(this,this.layerList))},t.prototype.collapse=function(t){this.collapsebutton=t},t.prototype.createMultiPolygon=function(t){var e=this,i=[];t.features.forEach(function(t){t.geometry.coordinates.forEach(function(t){t.forEach(function(t){i=[],t.forEach(function(t){i.push(t)});var a=r.polygon([i]);e.polygons.push(a)})})})},t.prototype.changeAttribution=function(){var t=this;Object(s.isNullOrUndefined)(this.map)||this.map.eachLayer(function(e){Object(s.isNullOrUndefined)(e.options)||Object(s.isNullOrUndefined)(e.options.attribution)||(t.map.removeLayer(e),"IMD"===t.sourceSelected?(t.dataTabToggle({value:!0}),e.options.attribution="<a href = 'https://mausam.imd.gov.in/'> Data Source : IMD </a>",t.addLegend(),t.createPanes()):"ECMWF"===t.sourceSelected?(t.dataTabToggle({value:!0}),e.options.attribution="<a href = 'https://www.ecmwf.int/'> Data Source : ECMWF </a>",t.addLegend(),t.createPanes()):"NOWCAST"===t.sourceSelected?(t.dataTabToggle({value:!1}),e.options.attribution="<a href = 'https://sharaku.eorc.jaxa.jp/GSMaP_RNC/index.htm'> Data Source : RNC </a>",t.addLegend(),t.createPanes()):e.options.attribution="",t.map.addLayer(e))})},t.prototype.goToMISView=function(){this.router.navigate(["tamilnadu","mis",n.b[n.a[this.component.toUpperCase()]]])},t.prototype.getsideBarStatus=function(t){this.sidebarstatus=t},t}())}}]);