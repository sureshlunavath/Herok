(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{"1VU4":function(t,e,o){"use strict";o.r(e);var a=o("CcnG"),n=function(){return function(){}}(),i=o("atuK"),r=o("D2NE"),l=o("9AJC"),s=o("pMnS"),u=o("XePT"),c=o("UzTy"),p=o("lfa1"),m=o("imx3"),h=o("6Ynu"),b=o("ZYCi"),d=o("6QN/"),y=o("x0dF"),f=o("XRV1"),v=o("QqAL"),_=o("jmvC"),g=o("SZbH"),L=o("q4vc"),w=o("4GxJ"),T=o("t/Na"),S=o("wJPv"),B=o("0gkA"),N=o("cDaN"),C=o("Gy67"),J=o("b67C"),x=o("zKbe"),A=o("Io2v"),M=o("62rn"),I=o("gM3f"),k=o("m1qP"),z=o("VvG+"),E=o("Ip0R"),D=o("+EyX"),F=o("HF1C"),O=o("TUlx"),P=o("csY2"),U=o("iJXZ"),V=o("dFIS"),R=o("zH92"),H=o("4R65"),Z=(o("ESut"),o("P2Dx"),o("h2AD"),o("BRqF"),o("73zf"),o("1KZf"),o("6LCt"),o("T9kQ"),o("iNfD"),o("dbVV"),o("JvN/")),G=o("LUGh"),j=o("XQuM"),W=o("7Amg"),q=o("QDzO"),K=o("Ex5H"),X=function(){function t(t,e,o,a,n,i,r,l,s,u){this.utils=t,this.sharedUtilsService=e,this.mapService=o,this.route=a,this.cd=n,this.chartConstant=i,this.router=r,this.injector=l,this.datepipe=s,this.dataService=u,this.dataTabToggleVal=!1,this.activeLayers=[],this.view="Admin",this.hourCounter="",this.blockNumber=0,this.playPosition=0,this.sourceSelected="RNC",this.playButtonDisable=!0,this.state="stop",this.bottomBarColumns=[],this.styleObjforBottomBar={},this.millisInSixHours=W.c.MILLIS_IN_6HOURS,this.heatMapoptions={opacity:.8,pane:"heatMap",minZoom:6,maxZoom:15},this.playWidth=3,this.toggleSidebarFilterStatus=!1,this.STATENAME=W.c.IDTOSTATENAMEMAPPING.tn,this.showThrobber=!0,this.showBottomBar=!1,this.bottomBarMenuSelectedIndex=0,this.styleObjforBottomBar={width:0},this.bottomBarColumns.push("Component"),this.selectedComponent=r.url.split("/")[2]}return t.prototype.ngAfterViewInit=function(){this.initMap(),this.addBaseLayers(this.layerList),this.serviceMap.addTimeBasedLayers(this,this.layerList),this.map.setView(K.e.TAMILNADU,K.f.TAMILNADU)},t.prototype.ngOnInit=function(){this.blockNumber=0,this.playPosition=0,this.utils.setPlayButton(this.playPosition),this.utils.setBlockNumber(this.blockNumber)},t.prototype.ngOnChanges=function(t){this.map&&this.changeStateBasedonUrlParams()},t.prototype.ngOnDestroy=function(){j.a.PANE_LIST.forEach(function(t){"heatMap"==t.name&&(t.zindex="395")})},t.prototype.createPanes=function(){var t=this;j.a.PANE_LIST.forEach(function(e){"heatMap"==e.name&&(e.zindex="407"),t.map.createPane(e.name),t.map.getPane(e.name).style.zIndex=e.zindex})},t.prototype.initMap=function(){this.map=H.map("map",this.mapService.getMapOptions(this.STATENAME,W.c)),this.utils.setMainMap(this.map),this.dataService.addMaps("map",this.map),this.injectService(),this.addZoomBar(),this.createPanes(),this.addLegend()},t.prototype.injectService=function(){this.serviceMap=this.injector.get(this.otherOptions.service)},t.prototype.addLegend=function(){var t=this.otherOptions.legend;this.legend&&this.legend.remove();var e=H.control({position:"bottomright"});e.onAdd=function(){var e=H.DomUtil.create("div","info");if(null!=t&&null!=t){null!=t.Units&&null!=t.Units&&(e.innerHTML+='<p class="bg-white text-center my-0 heading">'+t.Units+"</p");for(var o=t.colorValues,a=o.length-1;a>=0;a--)e.innerHTML+="<div><span style='background-color: "+o[a].backgroundColor+"'></span><p>"+o[a].text+"</p></div>"}return e},this.legend=e,e.addTo(this.map)},t.prototype.addBaseLayers=function(t){for(var e in t){var o=t[e];if("Base"==o.type&&(o.view==this.view||"Both"==o.view)){var a=this.serviceMap.createLayer(o,this);null!=a.layer&&null!=a.layer&&(1==o.hidelayer||a.layer.addTo(this.map),this.activeLayers=this.activeLayers.concat(a)),t[e]=a}}this.layerList=t},t.prototype.addZoomBar=function(){(new H.control.zoomBar).addTo(this.map)},t.prototype.convertTimestampToBlockValue=function(t){if(t=Number(t),"24"==this.forecastLength){var e=new Date(t).getHours(),o=new Date(t).getMinutes(),a="A.M";return e>12&&(e-=12,a="P.M"),e.toString()+":"+o.toString()+" "+a}return"10"==this.forecastLength?new Date(t).toLocaleDateString():t},t.prototype.show=function(){},t.prototype.revalidateMap=function(){var t=this;window.dispatchEvent(new Event("resize")),this.map&&setTimeout(function(){t.map.invalidateSize()},200)},t.prototype.dataTabToggle=function(){this.revalidateMap(),document.documentElement.style.setProperty("--opacite","display"),document.documentElement.style.setProperty("--lPercent","50%")},t.prototype.changeTimeLayers=function(t){this.labelStringsfromMapComp[0]&&(this.initialCounter=parseInt(this.labelStringsfromMapComp[0].groupName,10)),"nowcastweather"===this.router.url.split("/")[2]&&(this.counter=parseInt(t,10),this.hourCounter="",this.blockNumber=Math.floor((this.counter-this.initialCounter)/36e5),this.utils.setBlockNumber(this.blockNumber),this.utils.setPlayButton(this.blockNumber),this.serviceMap.changeTimeLayers(this,t))},t.prototype.removeGroupTimeLayers=function(t){this.serviceMap.removeGroupTimeLayers(this,t)},t.prototype.removeAllTimeLayers=function(){this.serviceMap.removeAllTimeLayers(this)},t.prototype.removeAllLayers=function(){var t=this;for(var e in this.activeLayers){var o=this.activeLayers[e];null!=o&&null!=o.layer&&null!=o.layer&&this.map.removeLayer(o.layer),this.activeLayers[e]="deleted"}this.activeLayers=this.activeLayers.filter(function(t){return"deleted"!=t}),this.map.eachLayer(function(e){return t.map.removeLayer(e)})},t.prototype.handleEventFromSearch=function(t){"DISTRICT"==t.et&&this.utils.setSearchBox(t),this.map.flyTo([t.location.lat,t.location.long],W.c.LOCATION_ZOOM_MAPPING[t.et.toUpperCase()])},t.prototype.changeStateBasedonUrlParams=function(){this.showThrobber=!0,this.removeAllTimeLayers(),this.serviceMap.addTimeBasedLayers(this,this.layerList)},t.prototype.collapse=function(t){this.collapsebutton=t},t.prototype.goToMISView=function(){this.router.navigate(["tamilnadu","mis",W.b["rainfall-forecast"]])},t.prototype.getsideBarStatus=function(t){this.sidebarstatus=t},t}(),Y=a.zb({encapsulation:0,styles:[[""]],data:{}});function Q(t){return a.Ub(0,[(t()(),a.Bb(0,0,null,null,1,"div",[["class","map-title"]],null,null,null,null,null)),(t()(),a.Sb(1,null,[" "," "]))],null,function(t,e){t(e,1,0,e.component.title)})}function $(t){return a.Ub(0,[(t()(),a.Bb(0,0,null,null,1,"app-play-progress-bar",[],null,[[null,"groupSelected"]],function(t,e,o){var a=!0;return"groupSelected"===e&&(a=!1!==t.component.changeTimeLayers(o)&&a),a},m.b,m.a)),a.Ab(1,770048,null,0,h.a,[b.a,d.a,b.p],{playButtonDisable:[0,"playButtonDisable"],labelStrings:[1,"labelStrings"]},{groupSelected:"groupSelected"})],function(t,e){var o=e.component;t(e,1,0,o.playButtonDisable,o.labelStringsfromMapComp)},null)}function tt(t){return a.Ub(0,[(t()(),a.Bb(0,0,null,null,36,"div",[["class","vh-100 d-flex flex-column bg-light"],["id","MapContainer"]],null,null,null,null,null)),(t()(),a.Bb(1,0,null,null,1,"app-tnw-navbar",[],null,[[null,"sidebarstatus"]],function(t,e,o){var a=!0;return"sidebarstatus"===e&&(a=!1!==t.component.getsideBarStatus(o)&&a),a},y.b,y.a)),a.Ab(2,114688,null,0,f.a,[v.a,_.a,g.j,b.p,L.a,w.C,T.c],null,{sidebarstatus:"sidebarstatus"}),(t()(),a.Bb(3,0,null,null,33,"div",[["class","tn-main-container"]],null,null,null,null,null)),(t()(),a.Bb(4,0,null,null,1,"app-side-bar",[["class","app-sidebar"]],null,null,null,S.b,S.a)),a.Ab(5,4964352,null,0,B.a,[N.a,C.a,b.p,J.a,b.a,L.a,x.a,L.a,w.C,_.a,v.a,g.j,A.a,w.C,d.a,M.a,I.a,k.a,z.a],{sidebarstate:[0,"sidebarstate"],sidebarComponent:[1,"sidebarComponent"]},null),(t()(),a.Bb(6,0,null,null,30,"main",[["class","container-fluid p-0"],["id","MapContainer"]],null,null,null,null,null)),(t()(),a.Bb(7,0,null,null,12,"div",[["class","container-fluid page-header-container-fluid"]],null,null,null,null,null)),(t()(),a.Bb(8,0,null,null,11,"div",[["class","page-header mb-0"]],null,null,null,null,null)),(t()(),a.Bb(9,0,null,null,6,"div",[["class","page-header-start"]],null,null,null,null,null)),(t()(),a.Bb(10,0,null,null,3,"div",[["class","page-title"]],null,null,null,null,null)),(t()(),a.Bb(11,0,null,null,1,"span",[["class","icon"]],null,null,null,null,null)),(t()(),a.Bb(12,0,null,null,0,"i",[["class","bi bi-cloud-rain-fill"]],null,null,null,null,null)),(t()(),a.Sb(-1,null,[" \xa0RAINFALL_NOWCAST"])),(t()(),a.sb(16777216,null,null,1,null,Q)),a.Ab(15,16384,null,0,E.q,[a.Y,a.V],{ngIf:[0,"ngIf"]},null),(t()(),a.Bb(16,0,null,null,3,"div",[["class","page-header-end"]],null,null,null,null,null)),(t()(),a.Bb(17,0,null,null,2,"div",[["class","btn-group btn-group-warning "]],null,null,null,null,null)),(t()(),a.Bb(18,0,null,null,1,"button",[["class","btn active "]],null,null,null,null,null)),(t()(),a.Sb(-1,null,["GIS"])),(t()(),a.Bb(20,0,null,null,16,"as-split",[["gutterSize","10"],["unit","pixel"]],null,[[null,"dragEnd"]],function(t,e,o){var a=!0;return"dragEnd"===e&&(a=!1!==t.component.revalidateMap()&&a),a},D.b,D.a)),a.Ab(21,4374528,[["splitEl",4]],0,F.c,[a.F,a.n,a.i,a.N],{unit:[0,"unit"],gutterSize:[1,"gutterSize"]},{dragEnd:"dragEnd"}),(t()(),a.Bb(22,0,null,0,12,"as-split-area",[["minSize","500"],["size","200"]],null,null,null,null,null)),a.Ab(23,212992,null,0,F.b,[a.F,a.n,a.N,F.c],{size:[0,"size"],minSize:[1,"minSize"]},null),(t()(),a.Bb(24,0,null,null,10,"div",[["class","map-container"]],null,null,null,null,null)),(t()(),a.Bb(25,0,null,null,4,"div",[["class","map-view"],["id","map"]],null,null,null,null,null)),(t()(),a.Bb(26,0,null,null,1,"spinner",[["id","showThrobber"]],null,null,null,O.b,O.a)),a.Ab(27,638976,null,0,P.a,[U.d],{id:[0,"id"],show:[1,"show"]},null),(t()(),a.sb(16777216,null,null,1,null,$)),a.Ab(29,16384,null,0,E.q,[a.Y,a.V],{ngIf:[0,"ngIf"]},null),(t()(),a.Bb(30,0,null,null,1,"app-time-menu",[["class","time-menu-tabs"]],null,null,null,V.b,V.a)),a.Ab(31,638976,null,0,R.a,[d.a,b.p,T.c,b.a],{sourceSelected:[0,"sourceSelected"]},null),(t()(),a.Bb(32,0,null,null,0,"link",[["href","https://d19vzq90twjlae.cloudfront.net/leaflet-0.7/leaflet.css"],["rel","stylesheet"]],null,null,null,null,null)),(t()(),a.Bb(33,0,null,null,1,"div",[["class","map-with-detailstable"]],null,null,null,null,null)),(t()(),a.Bb(34,0,null,null,0,"div",[["class","map-and-control"]],null,null,null,null,null)),(t()(),a.Bb(35,0,null,0,1,"as-split-area",[["class","datatab-container"],["maxSize","800"],["minSize","400"],["size","570"]],null,null,null,null,null)),a.Ab(36,212992,null,0,F.b,[a.F,a.n,a.N,F.c],{size:[0,"size"],minSize:[1,"minSize"],maxSize:[2,"maxSize"],visible:[3,"visible"]},null)],function(t,e){var o=e.component;t(e,2,0),t(e,5,0,o.sidebarstatus,o.sidebarComponent),t(e,15,0,!o.dataTabToggleVal),t(e,21,0,"pixel","10"),t(e,23,0,"200","500"),t(e,27,0,"showThrobber",o.showThrobber),t(e,29,0,!o.showBottomBar&&"observedweather"!==o.selectedComponent),t(e,31,0,o.sourceSelected),t(e,36,0,"570","400","800",o.dataTabToggleVal)},null)}var et=[{layerNameType:"FORECAST_ADMIN_WITH_MASK",serviceType:"WmsLayer",view:"Admin",type:"Base",env:"bg_color:#cccccc;bg_opacity:0.7;bg_width:0.5;i_stroke_color:#000000;i_stroke_width:1;i_shadow_color:#000000;i_shadow_opacity=0.1;i_shadow_width:7;o_s_boundary_color:#aaaaaa;o_s_boundary_width:0.5;s_boundary_color:#000000;s_boundary_width:0.1;m_boundary_color:#000000;m_boundary_width:0.5;text_color:#000000;b_s_color:#000000",zIndex:"state"},{layerNameType:"BLOCK",serviceType:"WmsLayer",view:"Admin",type:"Base",name:"blockLayer",env:"bg_color:#cccccc;bg_opacity:0.7;bg_width:0.5;i_stroke_color:#000000;i_stroke_width:1;i_shadow_color:#000000;i_shadow_opacity=0.1;i_shadow_width:7;o_s_boundary_color:#aaaaaa;o_s_boundary_width:0.5;s_boundary_color:#000000;s_boundary_width:0.1;m_boundary_color:#000000;m_boundary_width:0.5;text_color:#000000;b_s_color:#000000",minZoom:10,zIndex:"district"},{layerNameType:"VILLAGE",serviceType:"WmsLayer",view:"Admin",type:"Base",name:"villageLayer",env:"bg_color:#cccccc;bg_opacity:0.7;bg_width:0.5;i_stroke_color:#000000;i_stroke_width:1;i_shadow_color:#000000;i_shadow_opacity=0.1;i_shadow_width:7;o_s_boundary_color:#aaaaaa;o_s_boundary_width:0.5;s_boundary_color:#000000;s_boundary_width:0.1;m_boundary_color:#000000;m_boundary_width:0.5;text_color:#000000;b_s_color:#000000",minZoom:11,zIndex:"block"},{layerNameType:"FORECAST_BASIN_WITH_MASK",serviceType:"WmsLayer",view:"Basin",type:"Base",env:"bg_color:#cccccc;bg_opacity:0.7;bg_width:0.5;i_stroke_color:#000000;i_stroke_width:1;i_shadow_color:#000000;i_shadow_opacity=0.1;i_shadow_width:7;o_s_boundary_color:#aaaaaa;o_s_boundary_width:0.5;s_boundary_color:#000000;s_boundary_width:0.1;m_boundary_color:#000000;m_boundary_width:0.5;text_color:#000000;b_s_color:#000000",zIndex:"state"},{layerNameType:"SUBBASIN",serviceType:"WmsLayer",view:"Basin",type:"Base",name:"blockLayer",env:"bg_color:#cccccc;bg_opacity:0.7;bg_width:0.5;i_stroke_color:#000000;i_stroke_width:1;i_shadow_color:#000000;i_shadow_opacity=0.1;i_shadow_width:7;o_s_boundary_color:#aaaaaa;o_s_boundary_width:0.5;s_boundary_color:#000000;s_boundary_width:0.1;m_boundary_color:#000000;m_boundary_width:0.5;text_color:#000000;b_s_color:#000000",minZoom:9,zIndex:"district"},{layerNameType:"DISTRICT",serviceType:"VectorLayer",view:"Admin",type:"Base",interactive:!1,locationName:"district",min:7,max:9},{layerNameType:"BLOCK",serviceType:"VectorLayer",view:"Admin",type:"Base",interactive:!1,locationName:"block",min:10,max:10},{layerNameType:"VILLAGE",serviceType:"VectorLayer",view:"Admin",type:"Base",interactive:!1,locationName:"village",min:11},{layerNameType:"BASIN",serviceType:"VectorLayer",view:"Basin",type:"Base",interactive:!1,locationName:"basin",min:6,max:8},{layerNameType:"SUBBASIN",serviceType:"VectorLayer",view:"Basin",type:"Base",interactive:!1,min:9,max:18,locationName:"sub_basin"}],ot={type:"Time",time:"5",clip:!0,view:"Admin",serviceType:"HeatMap"},at={colorValues:[{backgroundColor:"#2740B9 ",color:"#000000",text:"0.1 - 0.5"},{backgroundColor:"#004AFF",color:"#000000",text:"0.5 - 1.0"},{backgroundColor:"#11C3D9",color:"#000000",text:"1.0 - 2.0"},{backgroundColor:"#32E909",color:"#000000",text:"2.0 - 3.0"},{backgroundColor:"#B1F450",color:"#000000",text:"3.0 - 5.0"},{backgroundColor:"#FFFB00",color:"#000000",text:"5.0 - 10.0"},{backgroundColor:"#F8B835",color:"#FFFFFF",text:"10.0 - 15.0"},{backgroundColor:"#FD7803",color:"#FFFFFF",text:"15.0 - 20.0"},{backgroundColor:"#FF0000",color:"#FFFFFF",text:"20.0 - 25.0"},{backgroundColor:"#943131",color:"#FFFFFF",text:">25.0"}],Units:"mm/hr"},nt=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),it=o("AytR"),rt=function(){function t(t,e){this.httpClient=t,this.utils=e,this.url=it.a.url}return t.prototype.getNext5HrsTimeStampsWithHeatMaps=function(t){if(t){for(var e={},o=Object.keys(t),a=0;a<o.length;a++)e[a]={},e[a].timeStamp=o[a],e[a].timeLineName={},e[a].timeLineName.toolTip=this.convertTimestampToFullBlockValue(e[a].timeStamp),e[a].timeLineName.label=this.convertTimestampToBlockValue(e[a].timeStamp),e[a].timeLinePos=a,e[a].url=t[o[a]];return e}},t.prototype.convertTimestampToFullBlockValue=function(t){t=Number(t);var e=new Date(t).getHours(),o=new Date(t).getMinutes(),a="A.M";12==e&&(e=e,a="P.M"),e>12&&(e-=12,a="P.M");var n=new Date(t+W.c.MILLIS_IN_1HOUR).getHours(),i=new Date(t+W.c.MILLIS_IN_1HOUR).getMinutes(),r="A.M";return 12==n&&(n=n,r="P.M"),n>12&&(n-=12,r="P.M"),e.toString()+":"+o.toString()+" "+a+" - "+n.toString()+":"+i.toString()+" "+r},t.prototype.convertTimestampToBlockValue=function(t){t=Number(t);var e=new Date(t).getHours(),o=new Date(t).getMinutes(),a="A.M";return 12==e&&(e=12,a="P.M"),e>12&&(e-=12,a="P.M"),e.toString()+":"+o.toString()+" "+a},t.prototype.getHeatMapsForNext5hrs=function(){var t=this.url.KAL_STAGING_URL_RESERVOIR+"/weatherForecastv2/getNowcastImageData",e=this.utils.getHeaders(t);return this.httpClient.get(t,e)},t.ngInjectableDef=a.cb({factory:function(){return new t(a.gb(T.c),a.gb(L.a))},token:t,providedIn:"root"}),t}(),lt=o("S+eF"),st=o("26FU"),ut=function(){function t(t,e){this.utils=t,this.http=e,this.selectedLocAndView=new st.a({}),this.urlConstant=it.a.url}return t.prototype.createLayer=function(t,e){return"HeatMap"==t.serviceType?this.createHeatMapLayer(t,e):"WmsLayer"==t.serviceType?this.createWmsLayer(t,e):"VectorLayer"==t.serviceType?this.createVectorLayer(t,e):new Promise(function(t,e){t(!0)})},t.prototype.createVectorLayer=function(t,e){var o={interactive:!0,rendererFactory:{},opacity:1,minZoom:5,maxZoom:18,pane:"district",visible:!0,transparent:!0,vectorTileLayerStyles:{},getFeatureId:{}};return null!=t.min&&null!=t.min&&(o.minZoom=t.min),null!=t.max&&null!=t.max&&(o.maxZoom=t.max),o.rendererFactory=H.canvas.tile,o.getFeatureId=function(t){return t.properties.uuid},o.vectorTileLayerStyles[t.layerName]=function(e,o){if("tamilnadu_district"==t.layerName||"tamilnadu_basin_forecast"==t.layerName)if(o>=9)var a={opacity:1,color:"black",weight:1};else a={opacity:0,color:"",weight:1};else a="tamilnadu_mandal"==t.layerName||"tamilnadu_subbasin"==t.layerName?{opacity:1,color:"#E5E4E2",weight:.5}:{opacity:0,color:"",weight:1};return a},t.layer=H.vectorGrid.protobuf("DISTRICT"==t.layerNameType||"BLOCK"==t.layerNameType||"BASIN"==t.layerNameType||"SUBBASIN"==t.layerNameType?this.urlConstant.GEOSERVER_URL+"kaleshwaram/gwc/service/wmts?layer=kaleshwaram:"+t.layerName+"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}":j.a.GEOSERVER_WMTS_URL+"&layer="+j.a.GEOSERVER_WORKSPACE_NAME+":"+t.layerName,o),e.map.on({dblclick:function(t){}}),t},t.prototype.createWmsLayer=function(t,e){var o={layers:t.layerName,opacity:1,format:"image/png",visible:!0,transparent:!0,pane:t.zIndex?t.zIndex:"district",fadeAnimation:!1,attribution:"<a href = 'https://sharaku.eorc.jaxa.jp/GSMaP_RNC/index.htm'> Data Source : RNC </a>"};return null!=t.minZoom&&null!=t.minZoom&&(o.minZoom=t.minZoom),null!=t.stateName&&null!=t.stateName&&(o.viewParams="stateName:"+t.stateName),null!=t.env&&null!=t.env&&(o.env=t.env),null!=t.cql_filter&&null!=t.cql_filter&&(o.cql_filter=t.cql_filter),t.layer=H.tileLayer.wms(j.a.GEOSERVER_WMS_URL,o),t},t.prototype.createHeatMapLayer=function(t,e){var o=this;return new Promise(function(a,n){if(null!=t.url&&null!=t.url){var i=o.getImageBounds([[5.6446,70.3169],[24.56576,89.99536]]);t.layer=H.imageTransform(t.url,i,{opacity:.8,pane:"heatMap",minZoom:6,maxZoom:15}),t.layer.addTo(e.map),e.map.removeLayer(t.layer)}a(t)})},t.prototype.getImageBounds=function(t){var e=[];return e.push([t[1][0],t[0][1]]),e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},t.prototype.addTimeBasedLayers=function(t,e){return o=this,void 0,n=function(){var o,a,n,i,r;return function(t,e){var o,a,n,i,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){r.label=i[1];break}if(6===i[0]&&r.label<n[1]){r.label=n[1],n=i;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(i);break}n[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(l){i=[6,l],a=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}(this,function(l){switch(l.label){case 0:return t.playButtonDisable=!0,t.labelStringsfromMapComp=[],o=[],a=[],[4,Object(lt.delay)(.1)];case 1:for(r in l.sent(),t.showThrobber=!0,n=function(n){var r=e[n];if("Time"==r.type&&"Admin"==r.view&&"true"==r.setDefault){var l=void 0;null!=r.layer&&null!=r.layer?(r.layer.addTo(t.map),t.activeGroup=r.groupName,t.activeLayers.push(r),null!=r.timeLineName&&null!=r.timeLineName&&(o[r.timeLinePos]={groupName:r.groupName,label:r.timeLineName}),l=new Promise(function(t){t(r)})):(l=i.createLayer(r,t)).then(function(a){null!=a.layer&&null!=a.layer&&(a.layer.addTo(t.map),t.activeGroup=a.groupName,t.activeLayers.push(a),null!=r.timeLineName&&null!=r.timeLineName&&(o[r.timeLinePos]={groupName:r.groupName,label:r.timeLineName})),e[n]=a}),a=a.concat(l)}},i=this,e)n(r);return Promise.all(a).then(function(e){t.labelStringsfromMapComp=JSON.parse(JSON.stringify(o)),t.playButtonDisable=!1,t.showThrobber=!1}),this.fetchTimeLayers(t,e,o),null!=t.labelStringsfromMapComp[0]&&(t.initialCounter=parseInt(t.labelStringsfromMapComp[0].groupName,10),this.utils.setLabelString(t.labelStringsfromMapComp)),[2]}})},new((a=void 0)||(a=Promise))(function(t,e){function i(t){try{l(n.next(t))}catch(o){e(o)}}function r(t){try{l(n.throw(t))}catch(o){e(o)}}function l(e){e.done?t(e.value):new a(function(t){t(e.value)}).then(i,r)}l((n=n.apply(o,[])).next())});var o,a,n},t.prototype.fetchTimeLayers=function(t,e,o){var a=[],n=function(n){var r=e[n];if("Time"==r.type&&"Admin"==r.view&&"false"==r.setDefault)if((null==r.layer||null==r.layer)&&r.timeLinePos>=0&&r.timeLinePos<6){var l=i.createLayer(r,t);l.then(function(t){e[n]=t,null!=t.layer&&null!=t.layer&&null!=r.timeLineName&&null!=r.timeLineName&&(o[r.timeLinePos]={groupName:r.groupName,label:r.timeLineName})}),a=a.concat(l)}else null!=r.layer&&null!=r.layer&&null!=r.timeLineName&&null!=r.timeLineName&&(o[r.timeLinePos]={groupName:r.groupName,label:r.timeLineName})},i=this;for(var r in e)n(r);Promise.all(a).then(function(e){t.labelStringsfromMapComp=JSON.parse(JSON.stringify(o))})},t.prototype.changeTimeLayers=function(t,e){if(e!=t.activeGroup){var o=t.activeGroup;t.activeGroup=e,this.removeGroupTimeLayers(t,o),this.addGroupTimeLayers(t,e)}},t.prototype.addGroupTimeLayers=function(t,e){for(var o in t.layerList){var a=t.layerList[o];"Time"==a.type&&a.groupName==e&&"Admin"==a.view&&null!=a.layer&&null!=a.layer&&(a.layer.addTo(t.map),t.activeLayers.push(a))}},t.prototype.removeGroupTimeLayers=function(t,e){for(var o in t.activeLayers){var a=t.activeLayers[o];a.groupName==e&&"Time"==a.type&&(t.map.removeLayer(a.layer),t.activeLayers[o]="deleted")}t.activeLayers=t.activeLayers.filter(function(t){return"deleted"!=t})},t.prototype.removeAllTimeLayers=function(t){for(var e in t.activeLayers){var o=t.activeLayers[e];"Time"==o.type&&(t.map.removeLayer(o.layer),t.activeLayers[e]="deleted")}t.activeLayers=t.activeLayers.filter(function(t){return"deleted"!=t})},t.prototype.setSelectedLocationAndView=function(t){this.selectedLocAndView.next(t)},t.prototype.getSelectedLocationAndView=function(){return this.selectedLocAndView.asObservable()},t.ngInjectableDef=a.cb({factory:function(){return new t(a.gb(d.a),a.gb(T.c))},token:t,providedIn:"root"}),t}(),ct=function(){return(ct=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var n in e=arguments[o])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)},pt=function(t,e,o,a){return new(o||(o=Promise))(function(n,i){function r(t){try{s(a.next(t))}catch(e){i(e)}}function l(t){try{s(a.throw(t))}catch(e){i(e)}}function s(t){t.done?n(t.value):new o(function(e){e(t.value)}).then(r,l)}s((a=a.apply(t,e||[])).next())})},mt=function(t,e){var o,a,n,i,r={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,a&&(n=2&i[0]?a.return:i[0]?a.throw||((n=a.return)&&n.call(a),0):a.next)&&!(n=n.call(a,i[1])).done)return n;switch(a=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,a=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(n=(n=r.trys).length>0&&n[n.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){r.label=i[1];break}if(6===i[0]&&r.label<n[1]){r.label=n[1],n=i;break}if(n&&r.label<n[2]){r.label=n[2],r.ops.push(i);break}n[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(l){i=[6,l],a=0}finally{o=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}},ht=function(){function t(t,e,o,a){this.route=t,this.router=e,this.rainfallService=o,this.utilService=a,this.labelStrings=[],this.sourceSelected="RNC",this.sidebarComponent=nt,this.stateName=W.c.IDTOSTATENAMEMAPPING.tn}return t.prototype.ngOnInit=function(){this.getLayersList(et),this.getOtherOptions(),this.component="RAINFALL"},t.prototype.getLayersList=function(t){var e=[];e=(e=e.concat(this.getCommonLayers(t))).concat(this.getHeatMapLayers()),this.layerList=e},t.prototype.getOtherOptions=function(){var t={};t.legend=at,t.service=ut,this.otherOptions=t,this.utilService.setOtherOptions(t)},t.prototype.getCommonLayers=function(t){var e=t;for(var o in e){var a=e[o];a.stateName=this.stateName,a.layerNameType&&(a.layerName="VectorLayer"===a.serviceType?W.c.STATE_TO_LAYERTYPE_NAME[this.stateName+"_"+a.layerNameType]:"kaleshwaram:"+W.c.STATE_TO_LAYERTYPE_NAME[this.stateName+"_"+a.layerNameType])}return e},t.prototype.getHeatMapLayers=function(){return pt(this,void 0,void 0,function(){var t,e;return mt(this,function(o){switch(o.label){case 0:return e=(t=[]).concat,[4,this.createNowcastHeatMapLayers()];case 1:return[2,e.apply(t,[o.sent()])]}})})},t.prototype.createNowcastHeatMapLayers=function(){return pt(this,void 0,void 0,function(){var t=this;return mt(this,function(e){return this.labelStrings=[],this.rainfallService.getHeatMapsForNext5hrs().subscribe(function(e){if(e){var o=t.rainfallService.getNext5HrsTimeStampsWithHeatMaps(e),a=[];for(var n in o){var i=ct({},ot);i.setDefault="0"==n?"true":"false",i.groupName=o[n].timeStamp.toString(),i.stateName=t.stateName,i.time="5",i.view="Admin",i.timeLineName=o[n].timeLineName,i.timeLinePos=o[n].timeLinePos,i.url=o[n].url,t.labelStrings[n]={label:o[n].timeLineName.label,groupName:o[n].timeStamp.toString()},a.push(i)}return t.layerList=t.layerList.concat(a),a}}),[2]})})},t}(),bt=a.zb({encapsulation:0,styles:[[""]],data:{}});function dt(t){return a.Ub(0,[(t()(),a.Bb(0,0,null,null,1,"app-gis-nc-map",[],null,null,null,tt,Y)),a.Ab(1,4964352,null,0,X,[d.a,L.a,q.a,b.a,a.i,G.a,b.p,a.v,E.e,Z.a],{layerList:[0,"layerList"],otherOptions:[1,"otherOptions"],labelStringsfromMapComp:[2,"labelStringsfromMapComp"],sidebarComponent:[3,"sidebarComponent"],sourceSelected:[4,"sourceSelected"]},null)],function(t,e){var o=e.component;t(e,1,0,o.layerList,o.otherOptions,o.labelStrings,o.sidebarComponent,o.sourceSelected)},null)}function yt(t){return a.Ub(0,[(t()(),a.Bb(0,0,null,null,1,"app-rainfall-nowcast-map-data",[],null,null,null,dt,bt)),a.Ab(1,114688,null,0,ht,[b.a,b.p,rt,d.a],null,null)],function(t,e){t(e,1,0)},null)}var ft=a.xb("app-rainfall-nowcast-map-data",ht,yt,{},{},[]),vt=o("gIcY"),_t=o("PSRr"),gt=o("NJnL"),Lt=o("lqqz"),wt=o("ARl4"),Tt=o("P8j/"),St=o("I5r7"),Bt=o("xkgV"),Nt=o("uBvM"),Ct=o("8gHh"),Jt=o("eDkP"),xt=o("Fzqc"),At=o("4tE/"),Mt=o("M2Lx"),It=o("Wf4p"),kt=o("0LeU"),zt=o("QpxQ"),Et=o("y4qS"),Dt=o("ZYjt"),Ft=o("BHnd"),Ot=o("sKLQ"),Pt=o("tIxg"),Ut=o("WUO2"),Vt=o("Psxf"),Rt=o("xqne"),Ht=o("XnQA"),Zt=o("Rb+X"),Gt=o("OgQW"),jt=o("fKFW"),Wt=o("Jcvy"),qt=o("6fg7"),Kt=o("JUyF"),Xt=o("dEIs"),Yt=o("I6yV"),Qt=o("FTix"),$t=o("cZPp"),te=o("dU2b"),ee=o("sAfe"),oe=o("dENO"),ae=o("dWZg"),ne=o("4c35"),ie=o("qAlS"),re=o("/VYK"),le=o("seP3"),se=o("b716"),ue=o("FpXt"),ce=o("t9UD"),pe=o("E6Y+"),me=o("BUMH"),he=o("0ofK"),be=o("317A"),de=o("Cc63"),ye=o("IL3j"),fe=o("1IPl"),ve=o("KeV7"),_e=o("ThRk"),ge=o("O6dt"),Le=function(){return function(){}}();o.d(e,"RainfallNowcastModuleNgFactory",function(){return we});var we=a.yb(n,[],function(t){return a.Ib([a.Jb(512,a.l,a.lb,[[8,[i.a,i.b,i.c,r.a,l.a,l.b,l.j,l.k,l.g,l.h,l.i,s.a,u.a,c.a,p.a,ft]],[3,a.l],a.D]),a.Jb(4608,vt.E,vt.E,[]),a.Jb(4608,T.j,T.p,[E.d,a.I,T.n]),a.Jb(4608,T.q,T.q,[T.j,T.o]),a.Jb(5120,T.a,function(t){return[t]},[T.q]),a.Jb(4608,T.m,T.m,[]),a.Jb(6144,T.k,null,[T.m]),a.Jb(4608,T.i,T.i,[T.k]),a.Jb(6144,T.b,null,[T.i]),a.Jb(4608,T.f,T.l,[T.b,a.v]),a.Jb(4608,T.c,T.c,[T.f]),a.Jb(4608,E.s,E.r,[a.z,[2,E.L]]),a.Jb(4608,_t.d,_t.d,[E.d]),a.Jb(4608,_t.b,_t.b,[]),a.Jb(4608,_t.a,_t.a,[]),a.Jb(4608,gt.a,gt.a,[a.O]),a.Jb(4608,Lt.a,Lt.a,[a.l,a.F,a.v,gt.a,a.g]),a.Jb(4608,wt.w,wt.w,[]),a.Jb(4608,wt.y,wt.y,[]),a.Jb(4608,wt.a,wt.a,[]),a.Jb(4608,wt.e,wt.e,[]),a.Jb(4608,wt.c,wt.c,[]),a.Jb(4608,wt.f,wt.f,[]),a.Jb(4608,wt.x,wt.x,[wt.y,wt.f]),a.Jb(4608,G.a,G.a,[]),a.Jb(4608,Tt.d,Tt.d,[]),a.Jb(4608,w.C,w.C,[a.l,a.v,w.sb,w.D]),a.Jb(4608,vt.f,vt.f,[]),a.Jb(4608,St.b,St.b,[]),a.Jb(4608,Bt.e,Bt.e,[]),a.Jb(4608,Nt.a,Nt.a,[]),a.Jb(4608,Ct.a,Ct.a,[]),a.Jb(4608,Jt.a,Jt.a,[Jt.g,Jt.c,a.l,Jt.f,Jt.d,a.v,a.F,E.d,xt.b,[2,E.l]]),a.Jb(5120,Jt.h,Jt.i,[Jt.a]),a.Jb(5120,At.b,At.c,[Jt.a]),a.Jb(4608,Mt.c,Mt.c,[]),a.Jb(4608,It.b,It.b,[]),a.Jb(4608,kt.a,kt.a,[]),a.Jb(4608,E.e,E.e,[a.z]),a.Jb(4608,rt,rt,[T.c,L.a]),a.Jb(1073742336,vt.A,vt.A,[]),a.Jb(1073742336,vt.l,vt.l,[]),a.Jb(1073742336,T.e,T.e,[]),a.Jb(1073742336,T.d,T.d,[]),a.Jb(1073742336,E.c,E.c,[]),a.Jb(1073742336,F.a,F.a,[]),a.Jb(1073742336,zt.c,zt.c,[]),a.Jb(1073742336,Et.o,Et.o,[]),a.Jb(1073742336,xt.a,xt.a,[]),a.Jb(1073742336,It.j,It.j,[[2,It.c],[2,Dt.g]]),a.Jb(1073742336,Ft.a,Ft.a,[]),a.Jb(1073742336,Ot.a,Ot.a,[]),a.Jb(1073742336,_t.c,_t.c,[]),a.Jb(1073742336,wt.d,wt.d,[]),a.Jb(1073742336,Pt.a,Pt.a,[]),a.Jb(1073742336,Ut.a,Ut.a,[]),a.Jb(1073742336,Vt.a,Vt.a,[]),a.Jb(1073742336,Rt.a,Rt.a,[]),a.Jb(1073742336,Tt.c,Tt.c,[]),a.Jb(1073742336,w.c,w.c,[]),a.Jb(1073742336,w.g,w.g,[]),a.Jb(1073742336,w.h,w.h,[]),a.Jb(1073742336,w.l,w.l,[]),a.Jb(1073742336,w.m,w.m,[]),a.Jb(1073742336,w.s,w.s,[]),a.Jb(1073742336,w.y,w.y,[]),a.Jb(1073742336,w.E,w.E,[]),a.Jb(1073742336,w.I,w.I,[]),a.Jb(1073742336,w.L,w.L,[]),a.Jb(1073742336,w.O,w.O,[]),a.Jb(1073742336,w.R,w.R,[]),a.Jb(1073742336,w.X,w.X,[]),a.Jb(1073742336,w.bb,w.bb,[]),a.Jb(1073742336,w.eb,w.eb,[]),a.Jb(1073742336,w.fb,w.fb,[]),a.Jb(1073742336,w.F,w.F,[]),a.Jb(1073742336,Ht.a,Ht.a,[]),a.Jb(1073742336,Zt.a,Zt.a,[]),a.Jb(1073742336,vt.w,vt.w,[]),a.Jb(1073742336,Gt.a,Gt.a,[]),a.Jb(1073742336,jt.a,jt.a,[]),a.Jb(1073742336,Wt.a,Wt.a,[]),a.Jb(1073742336,b.r,b.r,[[2,b.x],[2,b.p]]),a.Jb(1073742336,qt.a,qt.a,[]),a.Jb(1073742336,Kt.b,Kt.b,[]),a.Jb(1073742336,g.i,g.i,[]),a.Jb(1073742336,U.b,U.b,[]),a.Jb(1073742336,Xt.a,Xt.a,[]),a.Jb(1073742336,Yt.a,Yt.a,[]),a.Jb(1073742336,Qt.a,Qt.a,[]),a.Jb(1073742336,$t.a,$t.a,[]),a.Jb(1073742336,St.a,St.a,[]),a.Jb(1073742336,Bt.a,Bt.a,[]),a.Jb(1073742336,te.a,te.a,[]),a.Jb(1073742336,ee.a,ee.a,[]),a.Jb(1073742336,oe.a,oe.a,[]),a.Jb(1073742336,ae.b,ae.b,[]),a.Jb(1073742336,It.t,It.t,[]),a.Jb(1073742336,It.r,It.r,[]),a.Jb(1073742336,It.o,It.o,[]),a.Jb(1073742336,ne.b,ne.b,[]),a.Jb(1073742336,ie.b,ie.b,[]),a.Jb(1073742336,Jt.e,Jt.e,[]),a.Jb(1073742336,At.e,At.e,[]),a.Jb(1073742336,re.c,re.c,[]),a.Jb(1073742336,Mt.d,Mt.d,[]),a.Jb(1073742336,le.d,le.d,[]),a.Jb(1073742336,se.b,se.b,[]),a.Jb(1073742336,ue.a,ue.a,[]),a.Jb(1073742336,ce.a,ce.a,[]),a.Jb(1073742336,pe.a,pe.a,[]),a.Jb(1073742336,me.a,me.a,[]),a.Jb(1073742336,he.a,he.a,[]),a.Jb(1073742336,be.b,be.b,[]),a.Jb(1073742336,de.a,de.a,[]),a.Jb(1073742336,ye.a,ye.a,[]),a.Jb(1073742336,fe.a,fe.a,[]),a.Jb(1073742336,ve.a,ve.a,[]),a.Jb(1073742336,_e.a,_e.a,[]),a.Jb(1073742336,ge.a,ge.a,[]),a.Jb(1073742336,Le,Le,[]),a.Jb(1073742336,n,n,[]),a.Jb(256,T.n,"XSRF-TOKEN",[]),a.Jb(256,T.o,"X-XSRF-TOKEN",[]),a.Jb(256,zt.d,zt.e,[]),a.Jb(1024,b.n,function(){return[[],[],[{path:"",component:ht}]]},[]),a.Jb(256,g.b,{default:g.a,config:{}},[]),a.Jb(256,U.h,{fgsType:"ball-spin",overlayColor:"rgba(255,255,255,0.5)",fgsSize:40,pbThickness:2,hasProgressBar:!1,pbColor:"#0000FF"},[])])})},T9kQ:function(t,e){L.Control.ZoomBar=L.Control.extend({zoomToAreaActive:!1,includes:L.Evented?L.Evented.prototype:L.Mixin.Events,options:{position:"topright",containerClass:"zoom-bg",zoomInIconClass:"tnw-plus zoom",zoomOutIconClass:"tnw-minus zoom",zoomToBBoxIconClass:"tnw-search-by-rectangle  searchangle",addFullScreen:!0,fullscreenIconClass:"tnw-fullscreen no-border",showHistoryControl:!0,backViewIconClass:"fas fa-chevron-left",forwardViewIconClass:"fas fa-chevron-right"},initialize:function(t){L.setOptions(this,t)},onAdd:function(t){document.ondragstart=function(){return!1};var e=L.DomUtil.create("div","leaflet-control-zoom "+this.options.containerClass),o=L.DomUtil.create("ul","map-control-container",e);return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInIconClass,"Zoom In","leaflet-control-zoom-in",o,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutIconClass,"Zoom Out","leaflet-control-zoom-out",o,this._zoomOut,this),this._zoomToBBoxButton=this._createButton(this.options.zoomToBBoxIconClass,"Zoom to Area","leaflet-control-zoom-box",o,this._zoomToArea,this),this.options.showHistoryControl&&(this.historyControl=new L.control.historyControl({useExternalControls:!0}).addTo(t),this._previousExtent=this._createButton(this.options.backViewIconClass,"Go to Previous Extent","leaflet-control-previous-extent",o,this._goBack,this),this._nextExtent=this._createButton(this.options.forwardViewIconClass,"Go to Next Extent","leaflet-control-next-extent",o,this._goForward,this)),this._map.on("zoomend",this._updateDisabled,this),this._updateDisabled(),e},onRemove:function(t){t.off("zoomend",this._updateDisabled,this)},_zoomIn:function(t){console.log("Hello"),this._map.zoomIn()},_zoomOut:function(t){this._map.zoomOut()},_zoomToArea:function(t){this.zoomToAreaActive=!this.zoomToAreaActive,this.zoomToAreaActive?this._zoomToAreaEnable():this._zoomToAreaDisable()},_zoomToAreaEnable:function(){this._map.dragging._draggable._freeze=!0,this._map.boxZoom.addHooks(),L.DomUtil.addClass(this._zoomToBBoxButton,"active"),this._map.on("mousedown",this.handleMouseDown,this),L.DomUtil.addClass(this._map._container,"crosshair-cursor-enabled")},_zoomToAreaDisable:function(){this._map.dragging._draggable._freeze=!1,this._map.boxZoom.removeHooks(),L.DomUtil.removeClass(this._zoomToBBoxButton,"active"),this._map.off("mousedown",this.handleMouseDown,this),L.DomUtil.removeClass(this._map._container,"crosshair-cursor-enabled")},_toggleFullScreen:function(){this._map.toggleFullscreen(),this._map.isFullscreen()?L.DomUtil.removeClass(this._fullScreenButton,"active"):L.DomUtil.addClass(this._fullScreenButton,"active")},_goBack:function(){this.historyControl.goBack()},_goForward:function(){this.historyControl.goForward()},handleMouseDown:function(t){this._map.boxZoom._onMouseDown.call(this._map.boxZoom,{clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY,which:1,shiftKey:!0})},_updateDisabled:function(){L.DomUtil.removeClass(this._zoomInButton,"leaflet-disabled"),L.DomUtil.removeClass(this._zoomOutButton,"leaflet-disabled"),this._map._zoom<=this._map.getMinZoom()&&L.DomUtil.addClass(this._zoomOutButton,"leaflet-disabled"),this._map._zoom>=this._map.getMaxZoom()&&L.DomUtil.addClass(this._zoomInButton,"leaflet-disabled")},_createButton:function(t,e,o,a,n,i){var r=L.DomUtil.create("li","",a);r.title=e;var l=L.DomUtil.create("a",o,r);l.href="#",l.title=e,L.DomUtil.create("span",t,l);var s=L.DomEvent.stopPropagation;return L.DomEvent.on(r,"click",s).on(r,"mousedown",s).on(r,"dblclick",s).on(r,"click",L.DomEvent.preventDefault).on(r,"click",n,i),r}}),L.Draggable.prototype._freeze=!1,L.Draggable.prototype._updatePosition=function(){this._freeze||(this.fire("predrag"),L.DomUtil.setPosition(this._element,this._newPos),this.fire("drag"))},L.Map.mergeOptions({zoomBarControl:!1}),L.Map.addInitHook(function(){this.options.zoomBarControl&&(this.zoomBarControl=new L.Control.ZoomBar(this.options.zoomBarControl),this.addControl(this.zoomBarControl))}),L.control.zoomBar=function(t){return new L.Control.ZoomBar(t)},L.ZoomCenter=L.Class.extend({initialize:function(t,e){this.zoom=t,this.centerPoint=e}}),L.Control.HistoryControl=L.Control.extend({_map:null,_backButton:null,_forwardButton:null,_state:{backDisabled:null,forwardDisabled:null,ignoringEvents:!1,maxMovesToSave:0,history:{items:[]},future:{items:[]}},options:{position:"topright",maxMovesToSave:10,useExternalControls:!1,backImage:"fa fa-caret-left",backText:"",backTooltip:"Go to Previous Extent",backImageBeforeText:!0,forwardImage:"fa fa-caret-right",forwardText:"",forwardTooltip:"Go to Next Extent",forwardImageBeforeText:!1,orientation:"horizontal",shouldSaveMoveInHistory:function(t){return!0}},initialize:function(t){L.Util.setOptions(this,t),this._state.maxMovesToSave=this.options.maxMovesToSave,this._backButton=null,this._forwardButton=null},onAdd:function(t){this._map=t;var e=L.DomUtil.create("div","history-control leaflet-bar leaflet-control "+this.options.orientation);return this.options.useExternalControls||(this._backButton=this._createButton("back",e,this.goBack,this),this._forwardButton=this._createButton("forward",e,this.goForward,this)),this._updateDisabled(),this._addMapListeners(),e},onRemove:function(t){t.off("movestart")},performActionWithoutTriggeringEvent:function(t){this._state.ignoringEvents=!0,"function"==typeof t&&t()},moveWithoutTriggeringEvent:function(t){var e=this;this.performActionWithoutTriggeringEvent(function(){e._map.setView(t.centerPoint,t.zoom)})},goBack:function(){return this._invokeBackOrForward("historyback",this._state.history,this._state.future)},goForward:function(){return this._invokeBackOrForward("historyforward",this._state.future,this._state.history)},clearHistory:function(){this._state.history.items=[],this._updateDisabled()},clearFuture:function(){this._state.future.items=[],this._updateDisabled()},_createButton:function(t,e,o,a){var n=this.options[t+"Text"]||"",i=this.options[t+"Image"]||"",r=this.options[t+"Tooltip"]||"",l=L.DomUtil.create("a","history-"+t+"-button",e);if(i){var s='<i class="'+i+'"></i>';this.options[t+"ImageBeforeText"]?n=s+" "+n:n+=" "+s}l.innerHTML=n,l.href="#",l.title=r;var u=L.DomEvent.stopPropagation;return L.DomEvent.on(l,"click",u).on(l,"mousedown",u).on(l,"dblclick",u).on(l,"click",L.DomEvent.preventDefault).on(l,"click",o,a).on(l,"click",this._refocusOnMap,a),l},_updateDisabled:function(){var t=0===this._state.history.items.length,e=0===this._state.future.items.length;t!==this._state.backDisabled&&(this._state.backDisabled=t,this._map.fire("historyback"+(t?"disabled":"enabled"))),e!==this._state.forwardDisabled&&(this._state.forwardDisabled=e,this._map.fire("historyforward"+(e?"disabled":"enabled"))),this.options.useExternalControls||(this._setButtonDisabled(this._backButton,t),this._setButtonDisabled(this._forwardButton,e))},_setButtonDisabled:function(t,e){e?L.DomUtil.addClass(t,"leaflet-disabled"):L.DomUtil.removeClass(t,"leaflet-disabled")},_pop:function(t){if(t=t.items,L.Util.isArray(t)&&t.length>0)return t.splice(t.length-1,1)[0]},_push:function(t,e){var o=this._state.maxMovesToSave;t=t.items,L.Util.isArray(t)&&(t.push(e),o>0&&t.length>o&&t.splice(0,1))},_invokeBackOrForward:function(t,e,o){var a=this._popStackAndUseLocation(e,o);return!!a&&(this._map.fire(t,a),!0)},_popStackAndUseLocation:function(t,e){if(L.Util.isArray(t.items)&&t.items.length>0){var o=this._buildZoomCenterObjectFromCurrent(this._map),a=this._pop(t);return this._push(e,o),this.moveWithoutTriggeringEvent(a),{previousLocation:a,currentLocation:o}}},_buildZoomCenterObjectFromCurrent:function(t){return new L.ZoomCenter(t.getZoom(),t.getCenter())},_addMapListeners:function(){var t=this;this._map.on("movestart",function(e){if(t._state.ignoringEvents)t._state.ignoringEvents=!1;else{var o=t._buildZoomCenterObjectFromCurrent(e.target);t.options.shouldSaveMoveInHistory(o)&&(t._state.future.items=[],t._push(t._state.history,o))}t._updateDisabled()})}}),L.control.historyControl=function(t){return new L.Control.HistoryControl(t)}}}]);