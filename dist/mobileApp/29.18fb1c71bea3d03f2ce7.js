(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{PFLF:function(e,a,t){"use strict";t.d(a,"a",function(){return _});var r=t("4R65"),i=(t("9HRS"),t("fFf7"),t("RmgW"),t("x7WH"),t("MCLT")),o=t("9Z1F"),n=t("K9Ia"),l=t("G5J1"),s=(t("pvrN"),t("AytR")),p=t("6QN/"),y=t("RVfK"),u=t("X81E"),c=t("q4vc"),m=t("CcnG"),d=t("t/Na"),_=function(){function e(e,a,t,r){var i=this;this.utilsSrv=e,this.http=a,this.injector=t,this.utils=r,this.activeFeatureData={id:null,uuid:null,layer:null,external_i:null},this.urlConstants=s.a.url,this.updateSourceNameSource=new n.a,this.updateSourceName$=this.updateSourceNameSource.asObservable(),this.visibilityMiTanksSource="SENTINEL_1",this.utilsSrv.getSelectedParams().subscribe(function(e){i.utils.isEmptyObj(e)||(i.params=e)}),this.utilsSrv.getSelectedHeatMap().subscribe(function(e){i.utils.isEmptyObj(e)||(i.heatMapParams=e)}),this.utilsSrv.getNavigatedLayer().subscribe(function(e){i.utils.isEmptyObj(e)||i.navigationFromLayers(e)})}return e.prototype.addTileLayer=function(e){return"Google Satellite"===e.name?r.tileLayer.colorFilter(e.url,e):new r.TileLayer(e.url,e)},e.prototype.addBaseTileLayers=function(e,a){var t={};for(var r in e){var i,o=e[r];i=this.addTileLayer(o),o.visible?(a.removeLayer(i),a.addLayer(i)):a.removeLayer(i),t[o.name]=i}return t},e.prototype.getApplicationBasedLayer=function(e,a,t){return a==u.a.LAYER_TYPES.WMS_LAYER?this.getWMSOverLays(e,t):a==u.a.LAYER_TYPES.VECTOR_LAYER?this.getVECTOROverlays(e,t):a==u.a.LAYER_TYPES.GEOJSON_LAYER?this.getGEOJSONOverLays(e):void 0},e.prototype.getWMSOverLays=function(e,a){var t={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i],n={};n.name=o.name,n.type="wms",n.component=o.component,n.layerOptions={},o.cType&&o.cType.length>0&&(n.layerOptions.cType=o.cType),a&&a.pUUID&&(n.layerOptions.pUUID=a.pUUID),n.layerOptions.name=o.name,n.layerOptions.format="image/png",n.layerOptions.transparent=!0,n.url="State Names"===n.name?this.urlConstants.GEOSERVER_URL+"forecast/ows":n.name&&n.name.includes("Sentinel")&&!n.name.includes("Depth")?o.url:this.getGeoServerURL()+"/wms",this.validateValue(o.hasLegend)&&(n.layerOptions.hasLegend=o.hasLegend),this.validateValue(o.legendName)&&(n.layerOptions.legendName=o.legendName),this.validateValue(o.key)&&(n.layerOptions.key=o.key),this.validateValue(o.view)&&(n.layerOptions.view=o.view),this.validateValue(o.displayName)&&(n.layerOptions.displayName=o.displayName),this.validateValue(o.imagesrc)&&(n.layerOptions.imagesrc=o.imagesrc),this.validateValue(o.source)&&(n.layerOptions.source=o.source),this.validateValue(o.layer_name)&&(n.layerOptions.layer_name=o.layer_name),this.validateValue(o.cql_filter)&&(n.layerOptions.cql_filter=o.cql_filter),this.validateValue(o.subgroup)&&(n.layerOptions.subgroup=o.subgroup),this.validateValue(o.visible)&&(n.layerOptions.visible=o.visible),this.validateValue(o.dashboardView)&&(n.layerOptions.dashboardView=o.dashboardView),this.validateValue(o.group)&&(n.layerOptions.group=o.group),this.validateValue(o.layeroptions_name)&&(n.layerOptions.layers=o.layeroptions_name),this.validateValue(o.layeroptions_min_zoom)&&(n.layerOptions.minZoom=o.layeroptions_min_zoom),this.validateValue(o.layeroptions_max_zoom)&&(n.layerOptions.maxZoom=o.layeroptions_max_zoom),this.validateValue(o.layeroptions_pane)&&(n.layerOptions.pane=o.layeroptions_pane),this.validateValue(o.layeroptions_zindex)&&(n.layerOptions.zIndex=o.layeroptions_zindex),this.validateValue(o.layeroptions_show_on_selector)&&!o.layeroptions_show_on_selector&&(n.layerOptions.showOnSelector=o.layeroptions_show_on_selector),this.validateValue(o.group_type)&&(n.layerOptions.groupType=o.group_type),this.validateValue(o.data)&&(n.layerOptions.data=o.data),this.validateValue(o.crs)&&"EPSG4326"==o.crs&&(n.layerOptions.crs=r.CRS.EPSG4326),this.validateValue(o.position)&&(n.layerOptions.position=o.position),"WMS"===o.type&&("Sentinel 1"===n.name||"Sentinel 2 FCC"===n.name||"Sentinel 2 TCC"===n.name||n.name.includes("ALOS")?(n.key=n.name,t[n.name]=n):(n.key=i,t[i]=n)),this.validateValue(o.layeroptions_styles)&&(n.layerOptions.STYLES=o.layeroptions_styles),this.validateValue(o.info)&&(n.layerOptions.info=o.info)}return t},e.prototype.getGeoServerURL=function(e){var a=this.urlConstants.GEOSERVER_URL+"kaleshwaram";return e&&(a=this.urlConstants.GEOSERVER_URL_SECOND+"VASSARLABS"),a},e.prototype.validateValue=function(e){return!Object(i.isNullOrUndefined)(e)},e.prototype.setWMSOverlays=function(e,a,t){var i={};for(var o in a)if(a.hasOwnProperty(o)){var n,l=a[o];l.layerOptions.cql_filter||(l.layerOptions.cql_filter="1=1"),n=new r.TileLayer.WMS(l.url,"SRTM_DEM_30"==o?{layers:l.layerOptions.layers,format:"image/png",transparent:!0,attribution:l.layerOptions.attribution||"",minZoom:l.layerOptions.minZoom,maxZoom:l.layerOptions.maxZoom,pane:l.layerOptions.pane,styles:l.layerOptions.STYLES}:l.layerOptions),i[o]=n,t&&e.hasLayer(t[o])&&e.removeLayer(t[o]),o.startsWith("Depth_Class")||!0===l.layerOptions.visible&&e.addLayer(i[o])}return i},e.prototype.getCircleMarkerRadius=function(e,a){return a*e*.25},e.prototype.getGEOJSONOverLays=function(e){var a={};for(var t in e)if(e.hasOwnProperty(t)){var i=e[t],o={};o.name=i.name,o.type="GEOJSON",o.layerOptions={},i.cType&&i.cType.length>0&&(o.cType=i.cType,o.layerOptions.cType=i.cType),o.layerOptions.type="GEOJSON",o.layerOptions.name=i.name,o.layerOptions.format="image/png",o.layerOptions.transparent=!0,this.validateValue(i.hasLegend)&&(o.layerOptions.hasLegend=i.hasLegend),this.validateValue(i.legendName)&&(o.layerOptions.legendName=i.legendName),this.validateValue(i.legendData)&&(o.layerOptions.legendData=i.legendData),this.validateValue(i.component)&&(o.layerOptions.component=i.component),this.validateValue(i.view)&&(o.layerOptions.view=i.view),this.validateValue(i.layer_name)&&(o.layerOptions.layer_name=i.layer_name),this.validateValue(i.cqlfilter)&&(o.layerOptions.cql_filter=i.cqlfilter),this.validateValue(i.source)&&(o.layerOptions.source=i.source),this.validateValue(i.visible)&&(o.layerOptions.visible=i.visible),this.validateValue(i.layerFrom)&&(o.layerOptions.layerFrom=i.layerFrom),this.validateValue(i.includeAll)&&(o.layerOptions.includeAll=i.includeAll),this.validateValue(i.displayName)&&(o.layerOptions.displayName=i.displayName),this.validateValue(i.style)&&(o.layerOptions.style=i.style),this.validateValue(i.onEachFeature)&&(o.layerOptions.onEachFeature=i.onEachFeature),this.validateValue(i.pointToLayer)&&(o.layerOptions.pointToLayer=i.pointToLayer),this.validateValue(i.afterLayerAddition)&&(o.layerOptions.afterLayerAddition=i.afterLayerAddition),this.validateValue(i.group)&&(o.layerOptions.group=i.group),this.validateValue(i.canalWMSLayer)&&(o.layerOptions.canalWMSLayer=i.canalWMSLayer),this.validateValue(i.layeroptions_name)&&(o.layerOptions.layers=i.layeroptions_name),this.validateValue(i.layeroptions_min_zoom)&&(o.layerOptions.minZoom=i.layeroptions_min_zoom),this.validateValue(i.layeroptions_max_zoom)&&(o.layerOptions.maxZoom=i.layeroptions_max_zoom),this.validateValue(i.layeroptions_pane)&&(o.layerOptions.pane=i.layeroptions_pane),this.validateValue(i.layeroptions_zindex)&&(o.layerOptions.zIndex=i.layeroptions_zindex),this.validateValue(i.layeroptions_show_on_selector)&&!i.layeroptions_show_on_selector&&(o.layerOptions.showOnSelector=i.layeroptions_show_on_selector),this.validateValue(i.group_type)&&(o.layerOptions.groupType=i.group_type),this.validateValue(i.data)&&(o.layerOptions.data=i.data),this.validateValue(i.crs)&&"EPSG4326"==i.crs&&(o.layerOptions.crs=r.CRS.EPSG4326),this.validateValue(i.position)&&(o.layerOptions.position=i.position),"GEOJSON"===i.type&&(o.key=t,a[t]=o),this.validateValue(i.layeroptions_styles)&&(o.layerOptions.STYLES=i.layeroptions_styles),this.validateValue(i.info)&&(o.layerOptions.info=i.info)}return a},e.prototype.checkZoomlevelsForGeoJSON=function(e,a){return!!(e&&e.maxZoom&&e.minZoom&&e.maxZoom>=a&&e.minZoom<=a&&e.visible)},e.prototype.addGeoJsonLayersToMap=function(e,a,t,i,o,n){var l=this.injector.get(i.serviceType),s=r.geoJSON(e,{style:function(e){if(t.style)return l[t.style]()},pointToLayer:function(e,r){if(t.pointToLayer)return l[t.pointToLayer](e,a,o,n)},onEachFeature:function(e,r){if(t.onEachFeature)return l[t.onEachFeature](r,a,o,n)},pane:t.pane});return t.afterLayerAddition&&l[t.afterLayerAddition]&&e&&e.features&&e.features.length>0&&l[t.afterLayerAddition](n),s},e.prototype.getFilterForMITanks=function(e){return e.cql_filter||null},e.prototype.getVECTOROverlays=function(e,a){var t={};for(var i in e){var o=e[i];if("VECTOR"===o.type){var n={type:"vector"};n.name=o.name,n.component=o.component,n.layerOptions={},n.layerOptions.interactive=!0,n.layerOptions.name=o.layer_name,n.layerOptions.rendererFactory=r.canvas.tile,this.validateValue(o.cql_filter)&&(n.layerOptions.cql_filter=o.cql_filter);var l=!1;"tamilnadu:tamilnadu_mitank_polygon_layer"!=o.layeroptions_name&&"kaleshwaram:tamilnadu_district"!=o.layeroptions_name&&"kaleshwaram:tamilnadu_mandal"!=o.layeroptions_name&&"kaleshwaram:corewris_ts_complete_basin"!=o.layeroptions_name&&"kaleshwaram:corewris_ts_complete_sub_basin_updated"!=o.layeroptions_name&&"kaleshwaram:corewris_godavari_basin_new"!=o.layeroptions_name&&"kaleshwaram:corewris_godavari_sub_basin"!=o.layeroptions_name&&"kaleshwaram:kwaram_sub_command_area"!=o.layeroptions_name&&"kaleshwaram:kwaram_command_district"!=o.layeroptions_name&&"kaleshwaram:kwaram_command_mandal"!=o.layeroptions_name||(l=!0),n.url=this.getVectorLayerURL(o.layeroptions_name,n.layerOptions.cql_filter,null,l),n.layerOptions.view=o.view,n.layerOptions.minZoom=o.layeroptions_min_zoom,n.layerOptions.maxZoom=o.layeroptions_max_zoom,n.layerOptions.pane=o.layeroptions_pane,n.layerOptions.visible=o.visible,n.layerOptions.type=u.a.LAYER_TYPES.VECTOR_LAYER,o.component&&(n.layerOptions.component=o.component),this.validateValue(o.source)&&(n.layerOptions.source=o.source),this.validateValue(o.dashboardView)&&(n.layerOptions.dashboardView=o.dashboardView),this.validateValue(o.hasLegend)&&(n.layerOptions.hasLegend=o.hasLegend),this.validateValue(o.legendName)&&(n.layerOptions.legendName=o.legendName),n.layerOptions.group=o.group,n.layerOptions.displayName=o.displayName,this.validateValue(o.layeroptions_show_on_selector)&&!o.layeroptions_show_on_selector&&(n.layerOptions.showOnSelector=o.layeroptions_show_on_selector),this.validateValue(o.group_type)&&(n.layerOptions.groupType=o.group_type),n.layerOptions.vectorTileLayerStyles={},"Telangana District Boundaries"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.tamilnadu_district={fillColor:"transparent",opacity:.5,weight:.3,color:"#FF0000"},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Water Bodies"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.kwaram_ts_mitanks_polygon={weight:2.5,fill:!0,fillColor:"#47b4fa",color:"#15397e",fillOpacity:.8,opacity:1,interactive:!0},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Telangana Mandal Boundaries"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.tamilnadu_mandal={opacity:.5,weight:.15,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.firka_uuid}):"Telangana Mandal MITank"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.tamilnadu_mandal={opacity:.5,weight:.15,interactive:!0,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.loc_uuid}):"Telangana Basin"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.tamilnadu_basin={fillColor:"transparent",opacity:.5,weight:.3,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Telangana Subbasin"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.tamilnadu_subbasin={opacity:.5,weight:.15,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Telangana Subbasin MITank"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.corewris_ts_complete_sub_basin={opacity:.5,weight:.15,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Godavari Basin"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.corewris_godavari_basin_new={fillColor:"transparent",opacity:.8,weight:.7,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Godavari Subbasin"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.corewris_godavari_sub_basin={fillColor:"transparent",opacity:.5,weight:.15,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"MI_Tanks"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.tamilnadu_mitank_polygon_layer={weight:1,fill:!0,fillColor:"#FFCCCC",color:"#15397e",fillOpacity:.5,opacity:1,pane:"popUp",stroke:!0},n.layerOptions.getFeatureId=function(e){return e.properties.uuid}):"Telangana Sub Command Area Boundaries"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.kwaram_sub_command_area={fillColor:"transparent",opacity:.9,weight:1.1,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.scmduid}):"Telangana Command District Boundaries"==o.layer_name?(n.layerOptions.vectorTileLayerStyles.kwaram_command_district={fillColor:"transparent",opacity:.5,weight:.6,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.cmddistuid}):"Telangana Command Mandal MITank"==o.layer_name&&(n.layerOptions.vectorTileLayerStyles.kwaram_command_mandal={fillColor:"transparent",opacity:.5,weight:1.3,color:"#000000"},n.layerOptions.getFeatureId=function(e){return e.properties.cmdmanduid}),"VECTOR"===o.type&&(n.key=o,t[i]=n)}}return t},e.prototype.getVectorLayerURL=function(e,a,t,r){var o;return o=!Object(i.isNullOrUndefined)(r)&&r?"tamilnadu_mitank_polygon_layer"==e?"http://20.219.166.170:8080/geoserver/tamilnadu":y.h+"/geoserver/"+y.i:this.urlConstants.GEOSERVER_URL_SECOND+y.j,o+="/gwc/service/wmts?layer="+e+"&tilematrixset=EPSG:900913&Service=WMTS&Request=GetTile&Version=1.0.0&Format=application/x-protobuf;type=mapbox-vector&TileMatrix=EPSG:900913:{z}&TileCol={x}&TileRow={y}",this.validateValue(a)&&(o+="&cql_filter="+a),o},e.prototype.navigationFromLayers=function(e){var a=this;e.on("click",function(t){var r,i,o;e.options.name.includes("Telangana MiTank Polygon")&&(a.params.locName=t.sourceTarget.properties.tank_name,a.params.pUUID=t.sourceTarget.properties.uuid,a.params.pType="MITANK",a.params.cType="MITANK",a.params.actionType="sensorClick",a.utilsSrv.setSelectedParams(a.params)),t.sourceTarget.properties.sub_basin?(r=t.sourceTarget.properties.sub_basin,i=t.sourceTarget.properties.uuid,o="BASIN"):t.sourceTarget.properties.ba_name&&(r=t.sourceTarget.properties.ba_name,i=t.sourceTarget.properties.uuid,o="STATE"),t.sourceTarget.properties.mandal_nam?(r=t.sourceTarget.properties.mandal_nam,i=t.sourceTarget.properties.loc_uuid,o="DISTRICT"):t.sourceTarget.properties.dist_name&&(r=t.sourceTarget.properties.dist_name,i=t.sourceTarget.properties.loc_uuid,o="STATE"),a.onLocationClick(r,i,o,void 0)})},e.prototype.activeFeatureDataId=function(){return this.activeFeatureData.external_i},e.prototype.onLocationClick=function(e,a,t,r){var i=this.params;i.locName=e,i.prevpUUID=i.pUUID,i.pUUID=a,i.pType=this.utils.getChildTypeForGivenParentType(t||i.pType,i.locationTypeList),i.cType=this.utils.getChildTypeForGivenParentType(i.pType,i.locationTypeList),i.actionType=r||"mapClick",this.utilsSrv.setSelectedParams(i)},e.prototype.setPopupHtmlContent=function(e,a){return'<div class="popup-table-section">\n        <div class="card-body p-0">\n        <table class="table table-sm m-0 table-bordered">\n            <tr>\n              <td> '+a+" </td>\n            </tr>\n        </table>\n      </div>\n      </div>"},e.prototype.selectDateonBasisOfRFtime=function(e){var a=new Date;a.setHours(0,0,0,0);var t=a.getTime();return t+=306e5,(new Date).getTime()<t&&e.setDate(e.getDate()-1),e},e.prototype.stylingforGeoJson=function(e){return{weight:1.8,fill:!0,fillColor:"#FFCCCC",color:"#000000",fillOpacity:.5,opacity:1,pane:"WA"}},e.prototype.getFeatureInfoForGivenPoint=function(e,a,t,r){var i=this.getFeatureInfoUrlForGivenPoint(e,a,t,r);return this.http.get(i).pipe(Object(o.a)(function(e){return l.a}))},e.prototype.getFeatureInfoUrlForGivenPoint=function(e,a,t,i){var o={request:"getFeatureInfo",service:"WMS",srs:"EPSG:4326",transparent:!0,version:i.wmsParams.version,format:i.wmsParams.format,bbox:a,height:Math.floor(t.y),width:Math.floor(t.x),layers:i.wmsParams.layers,query_layers:i.wmsParams.layers,info_format:"application/json",feature_count:50,CQL_FILTER:i.wmsParams.cql_filter?i.wmsParams.cql_filter:"1=1"};return o["1.3.0"===o.version?"i":"x"]=e.x,o["1.3.0"===o.version?"j":"y"]=e.y,i._url+r.Util.getParamString(o,i._url,!0)},e.prototype.getTimeWmsLayerFromLayerName=function(e,a,t){return new r.TileLayer.WMS(e._url,{layers:a,format:"image/png",transparent:!0,maxZoom:25,minZoom:5,pane:"base",time:t,timeDimension:!0,srs:"EPSG:4326"})},e.prototype.emitSourceChangeEvent=function(e){var a=this;setTimeout(function(){a.updateSourceNameSource.next({newSource:e})},2e3),this.visibilityMiTanksSource=e},e.prototype.getVisibilityMiTanksSource=function(){return this.visibilityMiTanksSource},e.ngInjectableDef=m.cb({factory:function(){return new e(m.gb(p.a),m.gb(d.c),m.gb(m.s),m.gb(c.a))},token:e,providedIn:"root"}),e}()},PMFU:function(e,a,t){"use strict";t.d(a,"a",function(){return o});var r=t("RShD"),i=t("CcnG"),o=function(){function e(){}return e.prototype.verifyAllParamsPresent=function(e,a){var t=!0,r=e.params;if(Object.keys(r).length>0){for(var i=0;i<a.length;i++){var o=a[i];if(-1==Object.keys(r).indexOf(o)&&(t=!1),!t)return}return t}return!1},e.prototype.formDefaultParams=function(e,a){var t={};if(!Object(r.d)(e)){for(var i=0,o=Object.keys(e);i<o.length;i++){var n=o[i];t[n]=e[n]}return t}},e.ngInjectableDef=i.cb({factory:function(){return new e},token:e,providedIn:"root"}),e}()},X81E:function(e,a,t){"use strict";t.d(a,"b",function(){return r}),t.d(a,"a",function(){return i});var r={LAYERKEY_SOURCE_MAP:{"Sentinel 1":"SENTINEL_1","Sentinel 2 FCC":"SENTINEL_2","Sentinel 2 TCC":"SENTINEL_2"},SOURCE_COORDINATE_MAP:{SENTINEL_1:[{point:{x:665,y:352},bbox:"78.39294433593751,18.665762138680716,79.00474548339845,18.838714379258032",size:{y:532,x:1782}},{point:{x:1064,y:412},bbox:"76.937255859375,18.012691932112393,81.83166503906251,19.396658607621557",size:{y:532,x:1782}}],SENTINEL_2:[{point:{x:776,y:247},bbox:"73.26232910156251,17.046281225389077,83.05114746093751,19.81839009384496",size:{y:532,x:1782}},{point:{x:665,y:352},bbox:"78.39294433593751,18.665762138680716,79.00474548339845,18.838714379258032",size:{y:532,x:1782}},{point:{x:1227,y:421},bbox:"74.43786621093751,16.99375545289456,84.19372558593751,19.766703551716976",size:{y:532,x:1782}}]},BASELAYER_METADATA_LAYER:{BASELAYER_METADATA:{name:"BASELAYER_METADATA",visible:!1,layeroptions_name:"kaleshwaram:baselayer_metadata",layeroptions_min_zoom:1,layeroptions_max_zoom:18,layeroptions_show_on_selector:!1,layeroptions_pane:"elev",type:"WMS",cql_filter:null,group:null}}},i={LAYER_TYPES:{TILE_LAYER:"TILELAYER",WMS_LAYER:"WMS",VECTOR_LAYER:"VECTOR",GEOJSON_LAYER:"GEOJSON",HEATMAP_LAYER:"HEATMAP"}}}}]);